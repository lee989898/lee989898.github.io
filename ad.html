<!DOCTYPE html>
<html>
<head>

    <!-- Document Settings -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <!-- Base Meta -->
    <!-- dynamically fixing the title for tag/author pages -->



    <title>__4차 세미나__</title>
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Styles'n'Scripts -->
    <link rel="stylesheet" type="text/css" href="/assets/built/screen.css" />
    <link rel="stylesheet" type="text/css" href="/assets/built/screen.edited.css" />
    <link rel="stylesheet" type="text/css" href="/assets/built/syntax.css" />
    <!-- highlight.js -->

    <!-- custom.css -->
    <link rel="stylesheet" type="text/css" href="/assets/built/custom.css" />

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

    <!-- 웹 폰트 -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/earlyaccess/nanumgothic.css">

    <!-- syntax.css -->
    <link rel="stylesheet" type="text/css" href="/assets/built/syntax.css" />

    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css">
    <style>.hljs { background: none; }</style>

    <!--[if IE]>
        <style>
            p, ol, ul{
                width: 100%;
            }
            blockquote{
                width: 100%;
            }
        </style>
    <![endif]-->
    
    <!-- This tag outputs SEO meta+structured data and other important settings -->
    <meta name="description" content="공부 블로그" />
    <link rel="shortcut icon" href="https://lee989898.github.io/assets/built/images/favicon.jpg" type="image/png" />
    <link rel="canonical" href="https://lee989898.github.io/ad" />
    <meta name="referrer" content="no-referrer-when-downgrade" />

    
    <script type="text/x-mathjax-config">
MathJax.Hub.Config({
    TeX: {
      equationNumbers: {
        autoNumber: "AMS"
      }
    },
    tex2jax: {
    inlineMath: [ ['$', '$'] ],
    displayMath: [ ['$$', '$$'] ],
    processEscapes: true,
  }
});
MathJax.Hub.Register.MessageHook("Math Processing Error",function (message) {
	  alert("Math Processing Error: "+message[1]);
	});
MathJax.Hub.Register.MessageHook("TeX Jax - parse error",function (message) {
	  alert("Math Processing Error: "+message[1]);
	});
</script>
<script type="text/javascript" async
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
</script>

    


     <!--title below is coming from _includes/dynamic_title-->
    <meta property="og:site_name" content="LEE" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="__4차 세미나__" />
    <meta property="og:description" content="4차 세미나 Server-Client 인스타그램을 통해 서버-클라이언트 개념에 대해 알아보자 사용자는 인스타 앱을 실행하거나 인스타 페이지에 접속한다. 이 때 인터넷에 연결되어 있지 않으면 새로운 피드가 보이지 않을 것이다 인터넷 연결이 됐어도 인스타그램에 글을 쓰거나 보기 위해서는 어딘가 저장이 되어 있어야 한다. 그곳에 새로운 글을 보여달라고 요청해야 한다 새로운 글을 보여달라고 요청을" />
    <meta property="og:url" content="https://lee989898.github.io/ad" />
    <meta property="og:image" content="https://lee989898.github.io/assets/built/images/android-logo.png" />
    <meta property="article:publisher" content="https://www.facebook.com/" />
    <meta property="article:author" content="https://www.facebook.com/" />
    <meta property="article:published_time" content="2022-05-07T16:07:07+09:00" />
    <meta property="article:modified_time" content="2022-05-07T16:07:07+09:00" />
    <meta property="article:tag" content="Android" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="__4차 세미나__" />
    <meta name="twitter:description" content="4차 세미나 Server-Client 인스타그램을 통해 서버-클라이언트 개념에 대해 알아보자 사용자는 인스타 앱을 실행하거나 인스타 페이지에 접속한다. 이 때 인터넷에 연결되어 있지 않으면 새로운 피드가 보이지 않을 것이다 인터넷 연결이 됐어도 인스타그램에 글을 쓰거나 보기 위해서는 어딘가 저장이 되어 있어야 한다. 그곳에 새로운 글을 보여달라고 요청해야 한다 새로운 글을 보여달라고 요청을" />
    <meta name="twitter:url" content="https://lee989898.github.io/" />
    <meta name="twitter:image" content="https://lee989898.github.io/assets/built/images/android-logo.png" />
    <meta name="twitter:label1" content="Written by" />
    <meta name="twitter:data1" content="LEE" />
    <meta name="twitter:label2" content="Filed under" />
    <meta name="twitter:data2" content="Android" />
    <meta name="twitter:site" content="@" />
    <meta name="twitter:creator" content="@" />
    <meta property="og:image:width" content="1400" />
    <meta property="og:image:height" content="933" />

    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Website",
    "publisher": {
        "@type": "Organization",
        "name": "LEE",
        "logo": "https://lee989898.github.io/"
    },
    "url": "https://lee989898.github.io/ad",
    "image": {
        "@type": "ImageObject",
        "url": "https://lee989898.github.io/assets/built/images/android-logo.png",
        "width": 2000,
        "height": 666
    },
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://lee989898.github.io/ad"
    },
    "description": "4차 세미나 Server-Client 인스타그램을 통해 서버-클라이언트 개념에 대해 알아보자 사용자는 인스타 앱을 실행하거나 인스타 페이지에 접속한다. 이 때 인터넷에 연결되어 있지 않으면 새로운 피드가 보이지 않을 것이다 인터넷 연결이 됐어도 인스타그램에 글을 쓰거나 보기 위해서는 어딘가 저장이 되어 있어야 한다. 그곳에 새로운 글을 보여달라고 요청해야 한다 새로운 글을 보여달라고 요청을"
}
    </script>

    <!-- <script type="text/javascript" src="https://demo.ghost.io/public/ghost-sdk.min.js?v=724281a32e"></script>
    <script type="text/javascript">
    ghost.init({
    	clientId: "ghost-frontend",
    	clientSecret: "f84a07a72b17"
    });
    </script> -->

    <meta name="generator" content="Jekyll 3.6.2" />
    <link rel="alternate" type="application/rss+xml" title="__4차 세미나__" href="/feed.xml" />


</head>
<body class="post-template">

    <div class="site-wrapper">
        <!-- All the main content gets inserted here, index.hbs, post.hbs, etc -->
        <!-- default -->

<!-- The tag above means: insert everything in this file
into the {body} of the default.hbs template -->

<header class="site-header outer">
    <div class="inner">
        <nav class="site-nav">
    <div class="site-nav-left">
        
            
                <a class="site-nav-logo" href="https://lee989898.github.io/">LEE</a>
            
        
        
            <ul class="nav" role="menu">
    <li class="nav-home" role="menuitem"><a href="/">Home</a></li>
    <li class="nav-about" role="menuitem"><a href="/about/">About</a></li>
    <li class="nav-kotlin" role="menuitem"><a href="/tag/kotlin/">코틀린</a></li>
    <li class="nav-algorithm" role="menuitem"><a href="/tag/algorithm/">알고리즘</a></li>
    <li class="nav-pl" role="menuitem"><a href="/tag/pl/">프언</a></li>
    <li class="nav-android" role="menuitem"><a href="/tag/android/">안드로이드</a></li>
    <li class="nav-jetpack" role="menuitem"><a href="/tag/jetpack/">제트팩</a></li>
    <li class="nav-security" role="menuitem"><a href="/tag/security/">컴보</a></li>
    <li class="nav-system" role="menuitem"><a href="/tag/system/">시스템프로그래밍</a></li>
    <li class="nav-systemcloud" role="menuitem"><a href="/tag/systemcloud/">시클보</a></li>
    <li class="nav-blockchain" role="menuitem"><a href="/tag/blockchain/">블록체인</a></li>
    <li class="nav-archive" role="menuitem">
        
        <a href="/archive.html">All Posts</a>
    </li>
    <li class="nav-archive" role="menuitem">
        <a href="/author_archive.html">Tag별 Posts</a>
    </li>


</ul>



        
    </div>
    <div class="site-nav-right">
        <div class="social-links">
            
            
        </div>
        
            <a class="subscribe-button" href="#subscribe">Search</a>
        
    </div>
</nav>

    </div>
</header>

<!-- Everything inside the #post tags pulls data from the post -->
<!-- #post -->

<main id="site-main" class="site-main outer" role="main">
    <div class="inner">

        <article class="post-full  tag-android post tag-android ">

            <header class="post-full-header">
                <section class="post-full-meta">
                    <time class="post-full-meta-date" datetime=" 7 May 2022"> 7 May 2022</time>
                    
                        <span class="date-divider">/</span>
                        
                            
                               <a href='/tag/android/'>ANDROID</a>
                            
                        
                    
                </section>
                <h1 class="post-full-title">__4차 세미나__</h1>
            </header>

            <!--
            
            <figure class="post-full-image" style="background-image: url(/assets/built/images/android-logo.png)">
            </figure>
            
            -->
            <section class="post-full-content">
                <div class="kg-card-markdown">
                    <h2 id="4차-세미나"><strong>4차 세미나</strong></h2>

<hr />

<blockquote>
  <p>Server-Client</p>
</blockquote>

<p>인스타그램을 통해 서버-클라이언트 개념에 대해 알아보자</p>

<p>사용자는 인스타 앱을 실행하거나 인스타 페이지에 접속한다. 이 때 인터넷에 연결되어 있지 않으면 새로운 피드가 보이지 않을 것이다<br />
인터넷 연결이 됐어도 인스타그램에 글을 쓰거나 보기 위해서는 어딘가 저장이 되어 있어야 한다. 그곳에 새로운 글을 보여달라고 요청해야 한다<br />
새로운 글을 보여달라고 요청을 한 뒤에는 화면에 보여지고 사용자가 볼 수 있어야 한다</p>

<p>위 설명에서 어떤 기기로 접속하던 동일하게 인스타그램에 피드를 요청하면 인스타그램에 데이터/서비스를 제공하는 컴퓨터를 Server라고 한다<br />
데이터, 서비스를 제공하는 역할이라 Server라고 한다</p>

<p>또한 아무 서버에 데이터를 요청한다고 인스타그램에 관한 정보가 오진 않을 것이다. 인스타그램에 데이터를 저장하는 역할을 하는 Server에 요청을 해야한다<br />
그때 필요한 주소, 그곳이 어디인지 접속 할 수 있도록 하는 친구가 URL 이라고 할 수 있다</p>

<p>그리고 이때 URL로 인스타 피드를 보여달라하는 것을 Request 해당 Request에 대한 처리를 자체적으로 하고 성공했다면 결과를 반환하는 것을 Response 라고 한다</p>

<p>사용자 - 클라이언트 상호 작용</p>

<ul>
  <li>사용자의 버튼 클릭 이벤트 처리</li>
  <li>사용자에게 화면을 그려주기</li>
  <li>사용자에게 로딩 화면을 보여줌</li>
  <li>데이터를 사용자가 보기 좋게 배치하고 그려줌</li>
</ul>

<p>클라이언트 - 서버 상호 작용</p>

<ul>
  <li>서버에게 데이터 요청 (피드 주세요)</li>
  <li>서버에서 데이터 전달 (이메일, 아이디, 비밀번호 전달)</li>
  <li>서버에게 서비스 요청 (로그인, 로그아웃)</li>
  <li>서버로부터 응답 받기</li>
  <li>서버로부터 받은 에러 처기하기 (404, 502 error)</li>
</ul>

<blockquote>
  <p>Json</p>
</blockquote>

<p>뭔가 요청하고 응답 받으려면 Server라는 컴퓨터에 구현된 우리 데이터를 담는 프로그램과 Client에 구현된 우리 데이터를 보여주는 프로그램이 소통을 해야하는데</p>

<ul>
  <li>서버 부분 구현 언어: javaScript, TypeScript, Python, Ruby 등</li>
  <li>클라이언트 부분 구현 언어: Android : Kotlin, java</li>
</ul>

<p>서로 다른 언어를 사용하고 언어 사이에 데이터를 저장하는 방법이 다르다. 그래서 서로 알아 들을 수 있는 방법이 필요하다</p>

<ul>
  <li>JSON:  서로 다른 언어 사이에서 데이터를 저장하는 방식이 다르기 때문에 만들어진 데이터 포맷
    <ul>
      <li>Text로 이루어져 있다(기계도 알아보기 싶고, 사람도 알아보기 쉽다)</li>
      <li>프로그래밍 언어와 플랫폼에 독립</li>
      <li>프로그래머에게 친숙한 관습을 사용</li>
    </ul>
  </li>
</ul>

<p>Json은 프로그래밍 언어가 아니다. (JavaScript Object Notation - 자바스크립트 객체 표기법) 그냥 경량 Data 교환 형식, 데이터의 표기 방법 정도 가벼워 JSON Kotlin으로 변환도 빠르고 용이하고 간단한 구조</p>

<ul>
  <li>JSON의 기본 자료형
    <ul>
      <li>Number (정수, 실수 모두 지원)</li>
      <li>String (큰따옴표(“)로 묶인 문자열. 역슬래시 이스케이프 문법을 지원함)</li>
      <li>Boolean (true/false)</li>
      <li>Array (임의의 종류의 값으로 이루어진 순서가 있는 리스트. 대괄호로 나타내며 요소는 쉼표로 구분)</li>
      <li>Object (순서가 없는 키-값 쌍의집합)</li>
    </ul>
  </li>
</ul>

<p>JSON의 기본 자료형: Array (임의의 종류의 값으로 이루어진 순서가 있는 리스트. 대괄호로 나타내며 요소는 쉼표로 구분.)</p>

<ul>
  <li>대괄호로 정의합니다</li>
  <li>우리가 잘 아는 0부터 시작하는 배열처럼 접근할 수 있습니다</li>
  <li>아무 자료형이나 들어갈 수 있습니다</li>
  <li>각 요소의 순서가 의미가 있다 간단하게 말해 순서가 있는 녀석</li>
</ul>

<p>JSON의 기본 자료형: Object (순서가 없는 키-값 쌍의집합)</p>

<ul>
  <li>키 값 쌍의 모음
    <ul>
      <li>JSON의 Array가 Kotlin에서 List와 같다면</li>
      <li>JSON의 Object는 Kotlin에서 map과 같다</li>
      <li>{} 중괄호로 정의한다</li>
      <li>Key 값은 String (문자열)이다</li>
      <li>Key 값을 이용해 실제 값에 접근할 수 있다</li>
    </ul>
  </li>
</ul>

<blockquote>
  <p>동기, 비동기</p>
</blockquote>

<p>동기(Synchronous)란: 직렬적인 작업</p>

<ul>
  <li>어떠한 작업이 끝날 때까지 다른 작업들이 대기한다</li>
  <li>설계가 매우 간단하고 직관적</li>
  <li>어떠한 작업의 결과를 가지고 다른 작업을 시작할 때 효과적 ex) UI를 그리는 작업</li>
</ul>

<p><img src="\assets\built\images\ad\ad27.png" alt="안드로이드" /></p>

<p>비동기(Synchronous)란: 병렬적인 작업</p>

<ul>
  <li>새로운 작업이 시작해도 기존의 작업에 영향을 끼치지 않음</li>
  <li>동기처리보다 복잡한 설계가 필요함</li>
  <li>시간이 오래 걸리는 작업, 무거운 작업(서버 통신, 파일 입출력 등)에 효과적</li>
</ul>

<p><img src="\assets\built\images\ad\ad28.png" alt="안드로이드" /></p>

<p>비동기 처리가 서버 통신 작업에 유리한 이유는 ANR Application Not Responding: 앱의 UI(메인) 스레드가 일정시간 어떤 Task에 잡혀 있으면 발생하는 오류 
따라서 서버 통신 작업이 동기 처리로 이루어질 경우 서버통신의 경우 무거운 작업이기때문에 경우에 따라 처리가 매우 오래 걸릴 수 도 있다. 앞서 설명했다시피 동기처리의 경우 어떠한 작업이 끝날 때 까지 다른 작업들이 대기하게 된다. 서버통신을 동기로 처리하게 될 경우 UI의 작업도 서버통신이 끝날 때 까지 멈춰있게 된다</p>

<p>그러면 앞에서 말했던 ANR이 발생하게 된다. 원하지 않는 강제종료가 발생하는 것이다. 이러한 점을 해결하려면 비동기 처리를 사용해야 한다. 비동기 처리를 통해 UI(메인) 스레드가 아닌 다른 스레드(IO 스레드)에서 서버통신 작업을 병렬적으로 처리해주게 되면 UI 작업을 계속 진행하면서도 서버통신 작업을 할 수 있다</p>

<blockquote>
  <p>Restful API</p>
</blockquote>

<p><img src="\assets\built\images\ad\ad29.png" alt="안드로이드" /></p>

<p>Rest란 Representational State Transfer 어떤 자원을 식별자(이름)로 구분해, 자원의 정보(상태)를 주고 받는 것이다<br />
프로토콜이나 표준이 아닌 아키텍처 원칙 세트 =&gt; 이러한 Rest 원칙을 잘 준수하는 API를 Restful API라고 한다</p>

<p>통신할땐 어떤 약속이 있는데 그러한 약속을 네트워크 통신 규약(프로토콜) 이라 부른다 https이다</p>

<p>https://api.github.com/users/kkk5474096</p>

<p>이처럼 어떤 자원을 식별자(이름, 자원표현)으로 구분하여 해당 자원이 상태(정보)를 주고 받는 모든것을 Representational State Transfer(REST) 라고 한다<br />
여기에 더해 HTTP Method(GET,POST,PUT,DELETE)라는 행위를 이용하여 CRUD(create, read, update, delete)를 적용하는 것을 의미한다. 그리고 이러한 REST라는 설계를 구현한, 쉽게 말해 위 설명이 잘 적용된 서비스를 RESTFUL 하다 라고 한다</p>

<p>즉 Restful API란 REST라는 설계 방식이 잘 지켜진 어플리케이션 프로그램과 상호작용하느 방법, 또는 규칙, 약속이다</p>

<p>서버에 어떤 자원을 어떻게 할건지 요청하는 행위도 알아보자</p>

<p>GET: 단순하게 자원에 해당하는 데이터를 받는 행위<br />
POST: 자원에 해당하는 데이터를 제출하는 행위 이를 받아 서버 상태 변경, 데이터를 저장할 떄 사용<br />
PUT: 자원에 해당하는 데이터를 변경하는 행위<br />
DELETE: 자원에 해당하는 데이터를 삭제하는 행위</p>

<blockquote>
  <p>Postman</p>
</blockquote>

<p><img src="\assets\built\images\ad\ad30.png" alt="안드로이드" /></p>

<p>Postman은 API 개발을 보다 빠르고 쉽게 구현 할 수 있도록 도와주며, 개발된 API를 테스트하여 문서화 또는 공유할 수 있도록 도와주는 플랫폼이다</p>

<ul>
  <li>공유된 API 테스트</li>
  <li>서버통신 작업에 대한 실수를 방지</li>
</ul>

<p>사용방법은</p>

<ol>
  <li>Postman 입력창에 BASE URL 입력</li>
  <li>http method 선택, 식별 URI를 입력</li>
  <li>서버에 전달할 Body값 (Json 형식)</li>
  <li>Send 버튼 클릭(서버에 Request), Request에 대한 Response 코드 확인, 해당 Request에 대한 Response 확인</li>
</ol>

<p>Response 코드란</p>

<ul>
  <li>1xx (정보): 요청을 받았으며 프로세스를 계속함</li>
  <li>2xx (성공): 요청을 성공적으로 받았으며 인식했고 수용함</li>
  <li>3xx (리다이렉션): 요청 완료를 위해 추가 작업 조치가 필요함</li>
  <li>4xx (클라이언트 오류): 요청의 문법이 잘못되었거나 요청을 처리할 수 없음</li>
  <li>5xx (서버 오류): 서버가 명백히 유효한 요청에 대해 충족을 실패했음</li>
</ul>

<hr />

<h2 id="retrofit2">Retrofit2</h2>

<hr />

<blockquote>
  <p>Retrofit2란?</p>
</blockquote>

<p>서버와 클라이언트 간 http 통신을 위한 라이브러리 (Okhttp를 이용해서 더 편하고 사용하기 쉽게 만든 것)</p>

<ul>
  <li>TypeSafe: 네트워크로 부터 전달된 데이터를 우리 프로그램에서 필요한 형태의 객체로 받을 수 있음</li>
  <li>JSON 구조의 데이터를 쉽게 가져오고 업로드</li>
</ul>

<blockquote>
  <p>서버 통신 순서</p>
</blockquote>

<p>Postman</p>

<ul>
  <li>서버 파트원과 필요한 데이터 논의(Postman)</li>
  <li>서버 API문서 확인 후 테스트(Postman)</li>
</ul>

<p>구현 부분</p>

<ul>
  <li>라이브러리 추가 및 AndroidManifest 설정</li>
  <li>서버 Request / Response 객체 설계</li>
  <li>Retrofit Interface 설계</li>
  <li>Retrofit Interface 실제 구현체 만들기</li>
  <li>Callback 등록하여 통신 요청</li>
</ul>

<blockquote>
  <p>라이브러리 추가 및 AndroidManifest 설정</p>
</blockquote>

<hr />

<details>
<summary>코드</summary>
<div>

    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 서버 연결을 위한 Retrofit2</span>
<span class="n">implementation</span> <span class="s">"com.squareup.retrofit2:retrofit:2.9.0"</span>

<span class="c1">// Retrofit2에서 gson 사용을 위한 컨버터</span>
<span class="n">implementation</span> <span class="s">"com.squareup.retrofit2:converter-gson:2.9.0"</span>

<span class="c1">// gson</span>
<span class="n">implementation</span> <span class="s">"com.google.code.gson:gson:2.8.6"</span>
</code></pre></div>    </div>

  </div>
</details>

<hr />

<ul>
  <li>gson은 Java에서 Json을 파싱하고, 생성하기 위해 사용되는 구글에서 개발한 오픈소스이다. retrofit2는 HTTP APPI를 자바 인터페이스 형태로 사용하는 라이브러리이다. 따라서 Java &lt;-&gt; gson을 쓸 수 있는 것이다</li>
  <li>Retrofit2는 gson을 자바 객체로 변환하는 자체 컨버터를 가지고 있지 않다. 따라서 컨버터 라이브러리의 경우 Retrofit2에 따로 넣어줘야 한다</li>
</ul>

<hr />

<details>
<summary>코드</summary>
<div>

    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">&lt;</span><span class="n">uses-permission</span> <span class="n">android</span><span class="p">:</span><span class="n">name</span><span class="p">=</span><span class="s">"android.permission.INTERNET"</span><span class="p">/&gt;</span>

<span class="p">&lt;</span><span class="n">application</span>
    <span class="n">android</span><span class="p">:</span><span class="n">usesCleartextTraffic</span><span class="p">=</span><span class="s">"true"</span>
    <span class="p">/&gt;</span>
</code></pre></div>    </div>

  </div>
</details>

<hr />

<p>인터넷 접속 권한을 부여하고, https 대신 http 통신을 하기 위해 usesCleartextTraffic을 true로 해준다</p>

<blockquote>
  <p>서버 Request/ Response 객체 설계</p>
</blockquote>

<p>받아오는 값은 Json, 안드로이드 스튜디오에서 쓰는 언어는 kotlin이다<br />
Json 객체의 키 값과 타입을 각각 데이터 클래스의 변수명과 타입에 일치 시켜주면 서버로부터 받아오는 Response의 경우 Retrofit 구현체에 추가되는 gsonConverter가 gson 데이터를 방금 만든 ResponseData로 변환시켜 주게 되고, 반대로 RequestData의 경우 gson 데이터로 변환시켜 서버에 전달해주게 된다</p>

<p>Json의 키 값과 데이터 클래스의 변수명이 같은 경우에는 @SerializedName 속성을 사용하지 않아도 자동으로 맵핑되어 변환되지만 Json의 키 값과 클래스의 변수명이 다른 경우에는 @SerializedName으로 이름표를 붙여야 맵핑이 된다</p>

<p><img src="\assets\built\images\ad\ad31.png" alt="안드로이드" /></p>

<blockquote>
  <p>Retrofit Interface 설계</p>
</blockquote>

<p>서버에 어떠한 요청을 보내면 어떻게 온다는 일종의 상호작용 방법을 정의하는 부분이다. http 메소드, URI, 헤더 등을 정의하는 부분이다</p>

<hr />

<details>
<summary>코드</summary>
<div>

    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">interface</span> <span class="nc">SoptService</span> <span class="p">{</span>
  <span class="nd">@POST</span><span class="p">(</span><span class="s">"auth/signin"</span><span class="p">)</span>
  <span class="k">fun</span> <span class="nf">postLogin</span><span class="p">(</span>
    <span class="nd">@Body</span> <span class="n">body</span><span class="p">:</span> <span class="nc">RequestSignIn</span>
  <span class="p">):</span> <span class="nc">Call</span><span class="p">&lt;</span><span class="nc">ResponseSiginIn</span><span class="p">&gt;</span>
<span class="p">}</span>
</code></pre></div>    </div>

  </div>
</details>

<hr />

<p>GET의 경우에는 Body값을 넣어주지 못한다. 따라서 @Query와 @Path를 통해 서버에서 요청하는 정보를 전달한다</p>

<ul>
  <li>POST, PUT Body 값 가능</li>
  <li>GET, DELETE Body 값 불가능</li>
</ul>

<p>Response에 해당하느 객체가 Json Object 타입일 떄 가장 바깥이 중괄호로 시작한다<br />
Response에 해당하는 객체가 Json Array 타입일 떄 대괄호로 시작한다</p>

<blockquote>
  <p>Retrofit Interface 실제 구현체(객체) 만들기</p>
</blockquote>

<p>Retrofit Interface 실제 구현체는 Retrofit Interface를 실질적으로 구현하여 생성해주는 객체이다</p>

<hr />

<details>
<summary>코드</summary>
<div>

    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">object</span> <span class="nc">ServiceCreator</span> <span class="p">{</span>
  <span class="k">private</span> <span class="k">const</span> <span class="kd">val</span> <span class="py">BASE_URL</span> <span class="p">=</span> <span class="s">"http://13.124.62.236/"</span> <span class="c1">// 메인 서버 도메인</span>

  <span class="k">private</span> <span class="kd">val</span> <span class="py">retrofit</span><span class="p">:</span> <span class="nc">Retrofit</span> <span class="p">=</span> <span class="nc">Retrofit</span><span class="p">.</span><span class="nc">Builder</span><span class="p">()</span>
    <span class="p">.</span><span class="nf">baseUrl</span><span class="p">(</span><span class="nc">BASE_URL</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">addConvererFactory</span><span class="p">(</span><span class="nc">GsonConverterFactory</span><span class="p">.</span><span class="nf">create</span><span class="p">())</span>
    <span class="p">.</span><span class="nf">build</span><span class="p">()</span>

    <span class="kd">val</span> <span class="py">soptService</span><span class="p">:</span> <span class="nc">SoptService</span> <span class="p">=</span> <span class="n">retrofit</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="nc">SoptService</span><span class="o">::</span><span class="k">class</span><span class="p">.</span><span class="n">java</span><span class="p">)</span> <span class="c1">// 인터페이스 객체를 create에 넘겨 실제 구현체 생성 </span>
<span class="p">}</span>
</code></pre></div>    </div>

  </div>
</details>

<hr />

<ul>
  <li>Retrofit.Builder(): 레트로핏 빌더 생성 (생성자 호출)</li>
  <li>baseUrl(BASE_URL): 빌더 객체의 baseUrl 호출. 서버의 메인 URL 전달</li>
  <li>addConverterFactory(GsonConverterFactory.create()): gson 컨버터 연동</li>
  <li>build(): Retrofit 객체 반환</li>
</ul>

<p>서버 호출이 필요할 때마다 Retrofit 객체를 만들어야 한다면 너무 비효율적이기 때문에 Retrofit 객체의 경우 싱글톤(Object)으로 제작하는 것이 바람직하다</p>

<p>싱글톤이란 최소 한번만 메모리를 할당하고(Static) 그 메모리에 인스턴스를 만들어 사용하는 디자인 패턴이다<br />
쉽게 말해 앱 통틀어서 하나만 생성되는 객체이다</p>

<blockquote>
  <p>Callback 등록하여 통신 요청</p>
</blockquote>

<p>Call, Callback이란?</p>

<p>Call<Type> 동기적 또는 비 동기적으로 Type을 받아오는 객체
CallBack<Type> Type 객체를 받아왔을 때 프로그래머의 행동</Type></Type></p>

<hr />

<details>
<summary>코드</summary>
<div>

    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">private</span> <span class="k">fun</span> <span class="nf">loginNetwork</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="py">requestSignIn</span> <span class="p">=</span> <span class="nc">RequestSignIn</span><span class="p">(</span>
            <span class="n">id</span> <span class="p">=</span> <span class="n">binding</span><span class="p">.</span><span class="n">signInIdEt</span><span class="p">.</span><span class="n">text</span><span class="p">.</span><span class="nf">toString</span><span class="p">(),</span>
            <span class="n">password</span> <span class="p">=</span> <span class="n">binding</span><span class="p">.</span><span class="n">signInPasswordEt</span><span class="p">.</span><span class="n">text</span><span class="p">.</span><span class="nf">toString</span><span class="p">()</span>
        <span class="p">)</span>

        <span class="kd">val</span> <span class="py">call</span> <span class="p">=</span> <span class="nc">ServiceCreator</span><span class="p">.</span><span class="n">soptService</span><span class="p">.</span><span class="nf">postLogin</span><span class="p">(</span><span class="n">requestSignIn</span><span class="p">)</span>

        <span class="n">call</span><span class="p">.</span><span class="nf">enqueue</span><span class="p">(</span><span class="kd">object</span> <span class="err">: </span><span class="nc">Callback</span><span class="p">&lt;</span><span class="nc">ResponseSignIn</span><span class="p">&gt;</span> <span class="p">{</span>
            <span class="k">override</span> <span class="k">fun</span> <span class="nf">onResponse</span><span class="p">(</span>
                <span class="n">call</span><span class="p">:</span> <span class="nc">Call</span><span class="p">&lt;</span><span class="nc">ResponseSignIn</span><span class="p">&gt;,</span>
                <span class="n">response</span><span class="p">:</span> <span class="nc">Response</span><span class="p">&lt;</span><span class="nc">ResponseSignIn</span><span class="p">&gt;</span>
            <span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">isSuccessful</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kd">val</span> <span class="py">data</span> <span class="p">=</span> <span class="n">response</span><span class="p">.</span><span class="nf">body</span><span class="p">()</span><span class="o">?.</span><span class="n">data</span>

                    <span class="nc">Toast</span><span class="p">.</span><span class="nf">makeText</span><span class="p">(</span>
                        <span class="k">this</span><span class="nd">@SignInActivity</span><span class="p">,</span>
                        <span class="s">"${data?.email}님 반갑습니다!"</span><span class="p">,</span>
                        <span class="nc">Toast</span><span class="p">.</span><span class="nc">LENGTH_SHORT</span>
                    <span class="p">).</span><span class="nf">show</span><span class="p">()</span>
                    <span class="nf">startActivity</span><span class="p">(</span><span class="nc">Intent</span><span class="p">(</span><span class="k">this</span><span class="nd">@SignInActivity</span><span class="p">,</span> <span class="nc">HomeActivity</span><span class="o">::</span><span class="k">class</span><span class="p">.</span><span class="n">java</span><span class="p">))</span>
                <span class="p">}</span> <span class="k">else</span> <span class="nc">Toast</span><span class="p">.</span><span class="nf">makeText</span><span class="p">(</span><span class="k">this</span><span class="nd">@SignInActivity</span><span class="p">,</span> <span class="s">"로그인에 실패하셨습니다."</span><span class="p">,</span> <span class="nc">Toast</span><span class="p">.</span><span class="nc">LENGTH_SHORT</span><span class="p">)</span>
                    <span class="p">.</span><span class="nf">show</span><span class="p">()</span>
            <span class="p">}</span>

            <span class="k">override</span> <span class="k">fun</span> <span class="nf">onFailure</span><span class="p">(</span><span class="n">call</span><span class="p">:</span> <span class="nc">Call</span><span class="p">&lt;</span><span class="nc">ResponseSignIn</span><span class="p">&gt;,</span> <span class="n">t</span><span class="p">:</span> <span class="nc">Throwable</span><span class="p">)</span> <span class="p">{</span>
                <span class="nc">Log</span><span class="p">.</span><span class="nf">e</span><span class="p">(</span><span class="s">"NetworkTest"</span><span class="p">,</span> <span class="s">"error:$t"</span><span class="p">)</span>
            <span class="p">}</span>

        <span class="p">})</span>
    <span class="p">}</span>
</code></pre></div>    </div>

  </div>
</details>

<hr />

<ul>
  <li>서버에 요청을 보내기 위한 RequestData 생성</li>
  <li>call 객체에 enqueue를 호출하여 실제 서버통신을 비동시적으로 요청</li>
  <li>Status Code가 200~300 사이일 때 response.isSuccessful은 true를 반환</li>
  <li>response.body()는 null 값이 올 수도 있기 때문에 nullable한 타입</li>
  <li>비동기 통신 중 발생한 에러를 처리하는 코드 작성</li>
  <li>싱글턴 객체를 이용해 Retrofit이 만들어준 interface 구현체에 접근하여 Call 객체를 받아온다</li>
  <li>Call 객체의 비동기 작업 이후 작업이 끝날 때 할 행동을 Callbakc 객체로 표현</li>
</ul>

                </div>
            </section>

            <!-- Email subscribe form at the bottom of the page -->
            <!--
            
                <section class="subscribe-form">
                    <h3 class="subscribe-form-title">Subscribe to LEE</h3>
                    <p>Get the latest posts delivered right to your inbox</p>
                    <span id="searchform" method="post" action="/subscribe/" class="">
    <input class="confirm" type="hidden" name="confirm"  />
    <input class="location" type="hidden" name="location"  />
    <input class="referrer" type="hidden" name="referrer"  />

    <div class="form-group">
        <input class="subscribe-email" onkeyup="myFunc()"
               id="searchtext" type="text" name="searchtext"
               placeholder="Search..." />
    </div>
    <script type="text/javascript">
        function myFunc() {
            if(event.keyCode == 13) {
                var url = encodeURIComponent($("#searchtext").val());
                location.href = "/search.html?query=" + url;
            }
        }
    </script>
</span>
                </section>
            
            -->


            <footer class="post-full-footer">
                <!-- Everything inside the #author tags pulls data from the author -->
                <!-- #author-->
                
                    
                        <section class="author-card">
                            
                                <img class="author-profile-image" src="/assets/built/images/author-logo.jpg" alt="lee989898" />
                            
                            <section class="author-card-content">
                                <h4 class="author-card-name"><a href="/author/lee989898">lee989898</a></h4>
                                
                                    <p><a href="https://github.com/lee989898">깃허브</a></p>
                                
                            </section>
                        </section>
                        <div class="post-full-footer-right">
                            <a class="author-card-button" href="/author/lee989898">Read More</a>
                        </div>
                    
                
                <!-- /author  -->
            </footer>

            <!-- If you use Disqus comments, just uncomment this block.
            The only thing you need to change is "test-apkdzgmqhj" - which
            should be replaced with your own Disqus site-id. -->
            
                <section class="post-full-comments">
                    <div id="disqus_thread"></div>
                    <script>
                        var disqus_config = function () {
                            var this_page_url = 'https://lee989898.github.io/ad';
                            var this_page_identifier = '/ad';
                            var this_page_title = '__4차 세미나__';
                        };
                        (function() {
                            var d = document, s = d.createElement('script');
                            s.src = 'https://xxxxxxxx.disqus.com/embed.js';
                            s.setAttribute('data-timestamp', +new Date());
                            (d.head || d.body).appendChild(s);
                        })();
                    </script>
                </section>
            

        </article>

    </div>
</main>

<!-- Links to Previous/Next posts -->
<aside class="read-next outer">
    <div class="inner">
        <div class="read-next-feed">
            
                
                
                
                
                    <article class="read-next-card"
                        
                            style="background-image: url(/assets/built/images/blog-cover1.png)"
                        
                    >
                        <header class="read-next-card-header">
                            <small class="read-next-card-header-sitetitle">&mdash; LEE &mdash;</small>
                            
                                <h3 class="read-next-card-header-title"><a href="/tag/android/">Android</a></h3>
                            
                        </header>
                        <div class="read-next-divider"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 14.5s2 3 5 3 5.5-2.463 5.5-5.5S21 6.5 18 6.5c-5 0-7 11-12 11C2.962 17.5.5 15.037.5 12S3 6.5 6 6.5s4.5 3.5 4.5 3.5"/></svg>
</div>
                        <div class="read-next-card-content">
                            <ul>
                                
                                
                                  
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/ad">__3차 세미나__</a></li>
                                        
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/ad">2차 세미나</a></li>
                                        
                                    
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/ad">MVVM</a></li>
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                            </ul>
                        </div>
                        <footer class="read-next-card-footer">
                            <a href="/tag/android/">
                                
                                    See all 7 posts  →
                                
                            </a>
                        </footer>
                    </article>
                
            

            <!-- If there's a next post, display it using the same markup included from - partials/post-card.hbs -->
            

            <!-- If there's a previous post, display it using the same markup included from - partials/post-card.hbs -->
            
                

    <article class="post-card post-template">
        
            <a class="post-card-image-link" href="/jp">
                <div class="post-card-image" style="background-image: url(/assets/built/images/jetpack-logo.png)"></div>
            </a>
        
        <div class="post-card-content">
            <a class="post-card-content-link" href="/jp">
                <header class="post-card-header">
                    
                        
                            
                                <span class="post-card-tags">Jetpack</span>
                            
                        
                    

                    <h2 class="post-card-title">ViewBinding</h2>
                </header>
                <section class="post-card-excerpt">
                    
                        <p>DataBinding을 사용하면 코드의 데이터를 뷰에 바인딩하고 뷰를 코드에 바인딩할 수 있다. 그러나 프로젝트의 요구 사항이 뷰를 코드에 바인딩하는 것이라면 annotation 프로세서는 빌드 시간에 영향을 미치기 때문에 데이터 바인딩이 원하는 만큼 효율적이지 않다

</p>
                    
                </section>
            </a>
            <footer class="post-card-meta">
                
                    
                        
                        <img class="author-profile-image" src="/assets/built/images/author-logo.jpg" alt="lee989898" />
                        
                        <span class="post-card-author">
                            <a href="/author/lee989898/">lee989898</a>
                        </span>
                    
                
                <span class="reading-time">
                    
                    
                      5 min read
                    
                </span>
            </footer>
        </div>
    </article>

            

        </div>
    </div>
</aside>

<!-- Floating header which appears on-scroll, included from includes/floating-header.hbs -->
<div class="floating-header">
    <div class="floating-header-logo">
        <a href="https://lee989898.github.io/">
            
            <span>LEE</span>
        </a>
    </div>
    <span class="floating-header-divider">&mdash;</span>
    <div class="floating-header-title">__4차 세미나__</div>
    <div class="floating-header-share">
        <div class="floating-header-share-label">Share this <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
    <path d="M7.5 15.5V4a1.5 1.5 0 1 1 3 0v4.5h2a1 1 0 0 1 1 1h2a1 1 0 0 1 1 1H18a1.5 1.5 0 0 1 1.5 1.5v3.099c0 .929-.13 1.854-.385 2.748L17.5 23.5h-9c-1.5-2-5.417-8.673-5.417-8.673a1.2 1.2 0 0 1 1.76-1.605L7.5 15.5zm6-6v2m-3-3.5v3.5m6-1v2"/>
</svg>
</div>
        <a class="floating-header-share-tw" href="https://twitter.com/share?text=__4%EC%B0%A8+%EC%84%B8%EB%AF%B8%EB%82%98__&amp;url=https://lee989898.github.io/ad"
            onclick="window.open(this.href, 'share-twitter', 'width=550,height=235');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg>

        </a>
        <a class="floating-header-share-fb" href="https://www.facebook.com/sharer/sharer.php?u=https://lee989898.github.io/ad"
            onclick="window.open(this.href, 'share-facebook','width=580,height=296');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M19 6h5V0h-5c-3.86 0-7 3.14-7 7v3H8v6h4v16h6V16h5l1-6h-6V7c0-.542.458-1 1-1z"/></svg>

        </a>
    </div>
    <progress class="progress" value="0">
        <div class="progress-container">
            <span class="progress-bar"></span>
        </div>
    </progress>
</div>


<!-- /post -->

<!-- The #contentFor helper here will send everything inside it up to the matching #block helper found in default.hbs -->


        <!-- Previous/next page links - displayed on every page -->
        

        <!-- The footer at the very bottom of the screen -->
        <footer class="site-footer outer">
            <div class="site-footer-content inner">
                <section class="copyright"><a href="https://lee989898.github.io/">LEE</a> &copy; 2022</section>
                <section class="poweredby">Proudly published with <a href="https://jekyllrb.com/">Jekyll</a> &
                    <a href="https://pages.github.com/" target="_blank" rel="noopener">GitHub Pages</a> using
                    <a href="https://github.com/jekyllt/jasper2" target="_blank" rel="noopener">Jasper2</a></section>
                <nav class="site-footer-nav">
                    <a href="/">Latest Posts</a>
                    
                    
                    <a href="https://ghost.org" target="_blank" rel="noopener">Ghost</a>
                </nav>
            </div>
        </footer>

    </div>

    <!-- The big email subscribe modal content -->
    
    <div id="subscribe" class="subscribe-overlay">
        <a class="subscribe-overlay-close" href="#"></a>
        <div class="subscribe-overlay-content">
            
            <h1 class="subscribe-overlay-title">Search LEE</h1>
            <p class="subscribe-overlay-description">
                lunr.js를 이용한 posts 검색 </p>
            <span id="searchform" method="post" action="/subscribe/" class="">
    <input class="confirm" type="hidden" name="confirm"  />
    <input class="location" type="hidden" name="location"  />
    <input class="referrer" type="hidden" name="referrer"  />

    <div class="form-group">
        <input class="subscribe-email" onkeyup="myFunc()"
               id="searchtext" type="text" name="searchtext"
               placeholder="Search..." />
    </div>
    <script type="text/javascript">
        function myFunc() {
            if(event.keyCode == 13) {
                var url = encodeURIComponent($("#searchtext").val());
                location.href = "/search.html?query=" + url;
            }
        }
    </script>
</span>
        </div>
    </div>
    

    <!-- highlight.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.10.0/components/prism-abap.min.js"></script>
    <script>$(document).ready(function() {
      $('pre code').each(function(i, block) {
        hljs.highlightBlock(block);
      });
    });</script>

    <!-- jQuery + Fitvids, which makes all video embeds responsive -->
    <script
        src="https://code.jquery.com/jquery-3.2.1.min.js"
        integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
        crossorigin="anonymous">
    </script>
    <script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="https://demo.ghost.io/assets/js/jquery.fitvids.js?v=724281a32e"></script>


    <!-- Paginator increased to "infinit" in _config.yml -->
    <!-- if paginator.posts  -->
    <!-- <script>
        var maxPages = parseInt('');
    </script>
    <script src="/assets/js/infinitescroll.js"></script> -->
    <!-- /endif -->

    


    <!-- Add Google Analytics  -->
    <!-- Google Analytics Tracking code -->
 <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-xxxxxxxx-x', 'auto');
  ga('send', 'pageview');

 </script>


    <!-- The #block helper will pull in data from the #contentFor other template files. In this case, there's some JavaScript which we only want to use in post.hbs, but it needs to be included down here, after jQuery has already loaded. -->
    
        <script>

// NOTE: Scroll performance is poor in Safari
// - this appears to be due to the events firing much more slowly in Safari.
//   Dropping the scroll event and using only a raf loop results in smoother
//   scrolling but continuous processing even when not scrolling
$(document).ready(function () {
    // Start fitVids
    var $postContent = $(".post-full-content");
    $postContent.fitVids();
    // End fitVids

    var progressBar = document.querySelector('progress');
    var header = document.querySelector('.floating-header');
    var title = document.querySelector('.post-full-title');

    var lastScrollY = window.scrollY;
    var lastWindowHeight = window.innerHeight;
    var lastDocumentHeight = $(document).height();
    var ticking = false;

    function onScroll() {
        lastScrollY = window.scrollY;
        requestTick();
    }

    function onResize() {
        lastWindowHeight = window.innerHeight;
        lastDocumentHeight = $(document).height();
        requestTick();
    }

    function requestTick() {
        if (!ticking) {
            requestAnimationFrame(update);
        }
        ticking = true;
    }

    function update() {
        var trigger = title.getBoundingClientRect().top + window.scrollY;
        var triggerOffset = title.offsetHeight + 35;
        var progressMax = lastDocumentHeight - lastWindowHeight;

        // show/hide floating header
        if (lastScrollY >= trigger + triggerOffset) {
            header.classList.add('floating-active');
        } else {
            header.classList.remove('floating-active');
        }

        progressBar.setAttribute('max', progressMax);
        progressBar.setAttribute('value', lastScrollY);

        ticking = false;
    }

    window.addEventListener('scroll', onScroll, {passive: true});
    window.addEventListener('resize', onResize, false);

    update();
});
</script>

    

    <!-- Ghost outputs important scripts and data with this tag - it should always be the very last thing before the closing body tag -->
    <!-- ghost_foot -->

</body>
</html>
