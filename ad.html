<!DOCTYPE html>
<html>
<head>

    <!-- Document Settings -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <!-- Base Meta -->
    <!-- dynamically fixing the title for tag/author pages -->



    <title>Dagger2</title>
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Styles'n'Scripts -->
    <link rel="stylesheet" type="text/css" href="/assets/built/screen.css" />
    <link rel="stylesheet" type="text/css" href="/assets/built/screen.edited.css" />
    <link rel="stylesheet" type="text/css" href="/assets/built/syntax.css" />
    <!-- highlight.js -->

    <!-- custom.css -->
    <link rel="stylesheet" type="text/css" href="/assets/built/custom.css" />

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

    <!-- 웹 폰트 -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/earlyaccess/nanumgothic.css">

    <!-- syntax.css -->
    <link rel="stylesheet" type="text/css" href="/assets/built/syntax.css" />

    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css">
    <style>.hljs { background: none; }</style>

    <!--[if IE]>
        <style>
            p, ol, ul{
                width: 100%;
            }
            blockquote{
                width: 100%;
            }
        </style>
    <![endif]-->
    
    <!-- This tag outputs SEO meta+structured data and other important settings -->
    <meta name="description" content="공부 블로그" />
    <link rel="shortcut icon" href="https://lee989898.github.io/assets/built/images/favicon.jpg" type="image/png" />
    <link rel="canonical" href="https://lee989898.github.io/ad" />
    <meta name="referrer" content="no-referrer-when-downgrade" />

    
    <script type="text/x-mathjax-config">
MathJax.Hub.Config({
    TeX: {
      equationNumbers: {
        autoNumber: "AMS"
      }
    },
    tex2jax: {
    inlineMath: [ ['$', '$'] ],
    displayMath: [ ['$$', '$$'] ],
    processEscapes: true,
  }
});
MathJax.Hub.Register.MessageHook("Math Processing Error",function (message) {
	  alert("Math Processing Error: "+message[1]);
	});
MathJax.Hub.Register.MessageHook("TeX Jax - parse error",function (message) {
	  alert("Math Processing Error: "+message[1]);
	});
</script>
<script type="text/javascript" async
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
</script>

    


     <!--title below is coming from _includes/dynamic_title-->
    <meta property="og:site_name" content="LEE" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Dagger2" />
    <meta property="og:description" content="Dependency Injection이란? class Car{ private val engineInstance: Engine init{ engineInstance = Engine() startCar() } private fun startCar(){ engineInstance.startEngine() } } 위 코드에서 Car 클래스 안에 Engine 타입의 engineInstance 변수가 있고 init에서 Engine 객체를 생성하고 engineInstance 변수에 할당하고 startCar() 함수를 호출한다. Car 객체는 engineInstance를 사용하여 startCar() 함수를 실행한다 결과적으로 Car 클래스가" />
    <meta property="og:url" content="https://lee989898.github.io/ad" />
    <meta property="og:image" content="https://lee989898.github.io/assets/built/images/android-logo.png" />
    <meta property="article:publisher" content="https://www.facebook.com/" />
    <meta property="article:author" content="https://www.facebook.com/" />
    <meta property="article:published_time" content="2022-04-26T16:07:07+09:00" />
    <meta property="article:modified_time" content="2022-04-26T16:07:07+09:00" />
    <meta property="article:tag" content="Android" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Dagger2" />
    <meta name="twitter:description" content="Dependency Injection이란? class Car{ private val engineInstance: Engine init{ engineInstance = Engine() startCar() } private fun startCar(){ engineInstance.startEngine() } } 위 코드에서 Car 클래스 안에 Engine 타입의 engineInstance 변수가 있고 init에서 Engine 객체를 생성하고 engineInstance 변수에 할당하고 startCar() 함수를 호출한다. Car 객체는 engineInstance를 사용하여 startCar() 함수를 실행한다 결과적으로 Car 클래스가" />
    <meta name="twitter:url" content="https://lee989898.github.io/" />
    <meta name="twitter:image" content="https://lee989898.github.io/assets/built/images/android-logo.png" />
    <meta name="twitter:label1" content="Written by" />
    <meta name="twitter:data1" content="LEE" />
    <meta name="twitter:label2" content="Filed under" />
    <meta name="twitter:data2" content="Android" />
    <meta name="twitter:site" content="@" />
    <meta name="twitter:creator" content="@" />
    <meta property="og:image:width" content="1400" />
    <meta property="og:image:height" content="933" />

    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Website",
    "publisher": {
        "@type": "Organization",
        "name": "LEE",
        "logo": "https://lee989898.github.io/"
    },
    "url": "https://lee989898.github.io/ad",
    "image": {
        "@type": "ImageObject",
        "url": "https://lee989898.github.io/assets/built/images/android-logo.png",
        "width": 2000,
        "height": 666
    },
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://lee989898.github.io/ad"
    },
    "description": "Dependency Injection이란? class Car{ private val engineInstance: Engine init{ engineInstance = Engine() startCar() } private fun startCar(){ engineInstance.startEngine() } } 위 코드에서 Car 클래스 안에 Engine 타입의 engineInstance 변수가 있고 init에서 Engine 객체를 생성하고 engineInstance 변수에 할당하고 startCar() 함수를 호출한다. Car 객체는 engineInstance를 사용하여 startCar() 함수를 실행한다 결과적으로 Car 클래스가"
}
    </script>

    <!-- <script type="text/javascript" src="https://demo.ghost.io/public/ghost-sdk.min.js?v=724281a32e"></script>
    <script type="text/javascript">
    ghost.init({
    	clientId: "ghost-frontend",
    	clientSecret: "f84a07a72b17"
    });
    </script> -->

    <meta name="generator" content="Jekyll 3.6.2" />
    <link rel="alternate" type="application/rss+xml" title="Dagger2" href="/feed.xml" />


</head>
<body class="post-template">

    <div class="site-wrapper">
        <!-- All the main content gets inserted here, index.hbs, post.hbs, etc -->
        <!-- default -->

<!-- The tag above means: insert everything in this file
into the {body} of the default.hbs template -->

<header class="site-header outer">
    <div class="inner">
        <nav class="site-nav">
    <div class="site-nav-left">
        
            
                <a class="site-nav-logo" href="https://lee989898.github.io/">LEE</a>
            
        
        
            <ul class="nav" role="menu">
    <li class="nav-home" role="menuitem"><a href="/">Home</a></li>
    <li class="nav-about" role="menuitem"><a href="/about/">About</a></li>
    <li class="nav-kotlin" role="menuitem"><a href="/tag/kotlin/">코틀린</a></li>
    <li class="nav-algorithm" role="menuitem"><a href="/tag/algorithm/">알고리즘</a></li>
    <li class="nav-pl" role="menuitem"><a href="/tag/pl/">프로그래밍언어</a></li>
    <li class="nav-android" role="menuitem"><a href="/tag/android/">안드로이드</a></li>
    <li class="nav-security" role="menuitem"><a href="/tag/security/">컴퓨터보안</a></li>
    <li class="nav-system" role="menuitem"><a href="/tag/system/">시스템프로그래밍</a></li>
    <li class="nav-systemcloud" role="menuitem"><a href="/tag/systemcloud/">시스템클라우드보안</a></li>
    <li class="nav-blockchain" role="menuitem"><a href="/tag/blockchain/">블록체인</a></li>
    <li class="nav-archive" role="menuitem">
        
        <a href="/archive.html">All Posts</a>
    </li>
    <li class="nav-archive" role="menuitem">
        <a href="/author_archive.html">Tag별 Posts</a>
    </li>


</ul>



        
    </div>
    <div class="site-nav-right">
        <div class="social-links">
            
            
        </div>
        
            <a class="subscribe-button" href="#subscribe">Search</a>
        
    </div>
</nav>

    </div>
</header>

<!-- Everything inside the #post tags pulls data from the post -->
<!-- #post -->

<main id="site-main" class="site-main outer" role="main">
    <div class="inner">

        <article class="post-full  tag-android post tag-android ">

            <header class="post-full-header">
                <section class="post-full-meta">
                    <time class="post-full-meta-date" datetime="26 April 2022">26 April 2022</time>
                    
                        <span class="date-divider">/</span>
                        
                            
                               <a href='/tag/android/'>ANDROID</a>
                            
                        
                    
                </section>
                <h1 class="post-full-title">Dagger2</h1>
            </header>

            <!--
            
            <figure class="post-full-image" style="background-image: url(/assets/built/images/android-logo.png)">
            </figure>
            
            -->
            <section class="post-full-content">
                <div class="kg-card-markdown">
                    <blockquote>
  <p>Dependency Injection이란?</p>
</blockquote>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">Car</span><span class="p">{</span>
    <span class="k">private</span> <span class="kd">val</span> <span class="py">engineInstance</span><span class="p">:</span> <span class="nc">Engine</span>

    <span class="nf">init</span><span class="p">{</span>
        <span class="n">engineInstance</span> <span class="p">=</span> <span class="nc">Engine</span><span class="p">()</span>
        <span class="nf">startCar</span><span class="p">()</span>
    <span class="p">}</span>

    <span class="k">private</span> <span class="k">fun</span> <span class="nf">startCar</span><span class="p">(){</span>
        <span class="n">engineInstance</span><span class="p">.</span><span class="nf">startEngine</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>위 코드에서 Car 클래스 안에 Engine 타입의 engineInstance 변수가 있고 init에서 Engine 객체를 생성하고 engineInstance 변수에 할당하고 startCar() 함수를 호출한다. Car 객체는 engineInstance를 사용하여 startCar() 함수를 실행한다<br />
결과적으로 Car 클래스가 Engine 클래스에 의존하는 것을 볼 수 있다. Car 클래스는 Engine 클래스의 지원 없이 작동 할 수 없다. Car 클래스는 Engine 클래스에 종속된다고 말할 수 있다. 여기서 Engine클래스는 Car클래스에 의존하지 않을 수 있다. Engine 클래스를 보자</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">Engine</span><span class="p">{</span>
    <span class="k">private</span> <span class="kd">val</span> <span class="py">pistonInstance</span><span class="p">:</span> <span class="nc">Piston</span>

    <span class="nf">init</span><span class="p">{</span>
        <span class="n">pistonInstance</span> <span class="p">=</span> <span class="nc">Piston</span><span class="p">()</span>
    <span class="p">}</span>

    <span class="k">fun</span> <span class="nf">startEngine</span><span class="p">(){</span>
        <span class="c1">// code to start the engine</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Engine 객체도 Piston 객체 없이는 작동할 수 없기 때문에 Engine 클래스는 Piston클래스에 의존한다<br />
여기서 Car클래스의 Piston에 대한 간접적인 의존성을 볼 수 있다</p>

<p>실제 프로젝트에서 많은 의존성을 볼 수 있다. 그 예로 Retrofit을 사용하여 REST API와 통신하는 경우 Retrofit 인스턴스는 의존하게 되고, Room을 사용하는 경우 Room 데이터베이스 인스턴스가 의존하게 된다<br />
의존성이 밀접하게 결합되어 있으면 테스트, 버그, 수정 및 코드 확장을 수행하는 것이 어렵기 때문에 느슨하게 결합하고 응집력이 높은 의존성을 사용해야 한다. 이것이 의존성 주입을 하는 이유이다</p>

<p>의존성 주입에는 3가지 유형이 있다</p>

<ol>
  <li>생성자 주입</li>
  <li>메서드 주입</li>
  <li>필드 주입</li>
</ol>

<p>안드로이드 개발에서는 생성자 주입을 사용하는 것이 좋다</p>

<p>객체 지향 소프트웨어 엔지니어링의 원칙 중 하나는 Dependency Inversion이다. 이 원칙은 실체가 구체화에 의존하지 않고 추상화에 의존해야 한다고 말한다<br />
Car 클래스에서 클래스 내부에서 Engine 객체를 생성했는데 좋은 구현이 아니다. Car 클래스 외부에서 의존성을 가져와야 한다. 즉 Enigne 객체를 생성하는 코드를 작성하여 다른 곳에 보관하고 인터페이스를 통해 Car클래스에 필요할 때 Injection 해주어야 한다. 객체가 스스로 의존성을 만드는 것이 좋지 않기 때문에 이렇게 해주어야 한다</p>

<p>이렇게 의존 객체 외부에 필요한 의존성을 구성하고 필요할 떄 제공하는 프로세스를 Dependency Injection이라고 한다</p>

<p>안드로이드에서는 많은 시간과 노력을 들이지 않아도 되게 Dependency Injection 프레임워크가 도와준다. 그 중에서 dagger2는 가장 인기 있는 프레임워크 중 하나이다</p>

<hr />

<blockquote>
  <p>Dagger2</p>
</blockquote>

<p>Dagger2를 사용해보자. 먼저 dependency와 plugin을 추가하자</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// build.gradle</span>
<span class="nf">plugins</span> <span class="p">{</span>
    <span class="n">id</span> <span class="err">'</span><span class="n">kotlin-kapt</span><span class="err">'</span>
<span class="p">}</span>

<span class="nf">dependencies</span> <span class="p">{</span>
    <span class="n">implementation</span> <span class="err">'</span><span class="n">com</span><span class="p">.</span><span class="n">google</span><span class="p">.</span><span class="n">dagger</span><span class="p">:</span><span class="n">dagger</span><span class="p">:</span><span class="mf">2.28.3</span><span class="err">'</span>
    <span class="n">kapt</span> <span class="err">'</span><span class="n">com</span><span class="p">.</span><span class="n">google</span><span class="p">.</span><span class="n">dagger</span><span class="p">:</span><span class="n">dagger-compiler</span><span class="p">:</span><span class="mf">2.28.3</span><span class="err">'</span>
<span class="p">}</span>
</code></pre></div></div>

<p><img src="\assets\built\images\ad\ad20.png" alt="안드로이드" /></p>

<p>위 같이 스마트폰 객체에 3개의 직접적인 의존성이 있고 1개의 간접적인 의존성이 있다<br />
dagger2를 사용하기 위해 MainActivity에서 SmartPhone의 인스턴스 변수를 추가하자. 그리고 @Inject annotation을 사용하여 dagger2에게 알려주자 그러면 dagger2는 annotation을 고려하여 위 의존성 그래프가 나타내는 의존성을 구성하는 코드를 생성할 수 있다. 의존성 주입을 위해 dagger2를 사용하는 경우 생성자 주입을 사용하는 것이 좋다</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// SmartPhone.kt</span>
<span class="kd">class</span> <span class="nc">SmartPhone</span> <span class="nd">@Inject</span> <span class="k">constructor</span><span class="p">(</span><span class="kd">val</span> <span class="py">battery</span><span class="p">:</span> <span class="nc">Battery</span><span class="p">,</span> <span class="kd">val</span> <span class="py">simCard</span><span class="p">:</span> <span class="nc">SIMCard</span><span class="p">,</span> <span class="kd">val</span> <span class="py">memoryCard</span><span class="p">:</span> <span class="nc">MemoryCard</span><span class="p">)</span> <span class="p">{</span>

    <span class="nf">init</span> <span class="p">{</span>
        <span class="n">battery</span><span class="p">.</span><span class="nf">getPower</span><span class="p">()</span>
        <span class="n">simCard</span><span class="p">.</span><span class="nf">getConnection</span><span class="p">()</span>
        <span class="n">memoryCard</span><span class="p">.</span><span class="nf">getSpaceAvailability</span><span class="p">()</span>
        <span class="nc">Log</span><span class="p">.</span><span class="nf">i</span><span class="p">(</span><span class="s">"LEE"</span><span class="p">,</span> <span class="s">"SmartPhone Constructed"</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="k">fun</span> <span class="nf">makeACallWithRecoding</span><span class="p">(){</span>
        <span class="nc">Log</span><span class="p">.</span><span class="nf">i</span><span class="p">(</span><span class="s">"LEE"</span><span class="p">,</span> <span class="s">"Calling..."</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>추가로 @Component annotaiton 인터페이스도 필요하다. 함수 이름은 뭐든지 가능하지만 반환 유형은 원하는 의존성이어야 한다. dagger2는 반환 유형만 고려한다. 그러고 나서 안드로이드를 Rebuild 해야지 dagger2가 코드를 생성해준다</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ServiceProvider.kt</span>
<span class="kd">class</span> <span class="nc">ServiceProvider</span> <span class="nd">@Inject</span> <span class="k">constructor</span><span class="p">()</span> <span class="p">{</span>

    <span class="nf">init</span> <span class="p">{</span>
        <span class="nc">Log</span><span class="p">.</span><span class="nf">i</span><span class="p">(</span><span class="s">"LEE"</span><span class="p">,</span> <span class="s">"Service Provider Constructed"</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="k">fun</span> <span class="nf">getServiceProvider</span><span class="p">(){</span>
        <span class="nc">Log</span><span class="p">.</span><span class="nf">i</span><span class="p">(</span><span class="s">"LEE"</span><span class="p">,</span> <span class="s">"Service provider connected"</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>이제 MainActivity에서 SmartPhone 인스턴스를 호출하자</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// MainActivity.kt</span>
<span class="kd">class</span> <span class="nc">MainActivity</span> <span class="p">:</span> <span class="nc">AppCompatActivity</span><span class="p">()</span> <span class="p">{</span>

    <span class="k">private</span> <span class="k">lateinit</span> <span class="kd">var</span> <span class="py">smartPhone</span><span class="p">:</span> <span class="nc">SmartPhone</span>

    <span class="k">override</span> <span class="k">fun</span> <span class="nf">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">:</span> <span class="nc">Bundle</span><span class="p">?)</span> <span class="p">{</span>
        <span class="k">super</span><span class="p">.</span><span class="nf">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">)</span>
        <span class="nf">setContentView</span><span class="p">(</span><span class="nc">R</span><span class="p">.</span><span class="n">layout</span><span class="p">.</span><span class="n">activity_main</span><span class="p">)</span>

        <span class="nc">DaggerSmartPhoneComponent</span><span class="p">.</span><span class="nf">create</span><span class="p">()</span>
            <span class="p">.</span><span class="nf">getSmartPhone</span><span class="p">()</span>
            <span class="p">.</span><span class="nf">makeACallWithRecoding</span><span class="p">()</span>

<span class="c1">//        val smartPhone = SmartPhone(</span>
<span class="c1">//            Battery(),</span>
<span class="c1">//            SIMCard(ServiceProvider()),</span>
<span class="c1">//            MemoryCard()</span>
<span class="c1">//        ).makeACallWithRecoding()</span>

    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<hr />

<blockquote>
  <p>Dagger2 모듈</p>
</blockquote>

<p>Retrofit을 사용할 떄 Retrofit은 Dagger와는 다른 타사의 라이브러리이기 때문에 생성자에 annotaion을 추가할 수 없기 때문에 이러한 상황에서는 모듈을 사용하여 의존성을 주입하기 위해 Provider 함수를 작성해야 한다</p>

<p>위 코드에서 MemoryCard클래스를 소유하지 않는다고 가정하자. 소유하지 않기 때문에 @Inject annotaiton을 사용할 수 없다</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// MemoryCard.kt</span>
<span class="kd">class</span> <span class="nc">MemoryCard</span> <span class="p">{</span>

    <span class="nf">init</span> <span class="p">{</span>
        <span class="nc">Log</span><span class="p">.</span><span class="nf">i</span><span class="p">(</span><span class="s">"LEE"</span><span class="p">,</span> <span class="s">"Memory Card Constructed"</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="k">fun</span> <span class="nf">getSpaceAvailability</span><span class="p">(){</span>
        <span class="nc">Log</span><span class="p">.</span><span class="nf">i</span><span class="p">(</span><span class="s">"LEE"</span><span class="p">,</span> <span class="s">"Memory space available"</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>이제 모듈 클래스를 만들자. 클래스에 @Module annotation을 달아주고 함수에는 @Provider annotation을 달아줘야 한다</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// MemoryCardModule.kt</span>
<span class="nd">@Module</span>
<span class="kd">class</span> <span class="nc">MemoryCardModule</span> <span class="p">{</span>

    <span class="nd">@Provides</span>
    <span class="k">fun</span> <span class="nf">providesMemoryCard</span><span class="p">():</span> <span class="nc">MemoryCard</span><span class="p">{</span>
        <span class="k">return</span> <span class="nc">MemoryCard</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>그 다음에는 SmartPhoneComponent 인터페이스에 연결해줘야 한다</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// SmartPhoneComponent.kt</span>

</code></pre></div></div>

<p>모듈에서는 예측할 수 없는 오류가 나올 수 있어서 인스턴스 변수가 없어야 한다. 그리고 실제로 필요할 때만 모듈을 만들어야 한다</p>

<hr />

<blockquote>
  <p>Interface를 의존성</p>
</blockquote>

<p>어떤 경우에는 클래스 대신 인터페이스를 의존할 수 있다. Battery 클래스를 바꿔보자. 인터페이스에는 생성자가 없고 추상 함수여야 한다</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Battery.kt</span>
<span class="kd">interface</span> <span class="nc">Battery</span><span class="p">{</span>

    <span class="k">fun</span> <span class="nf">getPower</span><span class="p">()</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Battery 인터페이스를 구현하고 모듈을 통해 의존성을 제공하자. 먼저 클래스를 만들어 Battery를 상속한다. 그리고 @Inject annotation을 달아준다</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// NickelCadmiumBattery.kt</span>
<span class="kd">class</span> <span class="nc">NickelCadmiumBattery</span> <span class="nd">@Inject</span> <span class="k">constructor</span><span class="p">():</span> <span class="nc">Battery</span> <span class="p">{</span>
    <span class="k">override</span> <span class="k">fun</span> <span class="nf">getPower</span><span class="p">()</span> <span class="p">{</span>
        <span class="nc">Log</span><span class="p">.</span><span class="nf">i</span><span class="p">(</span><span class="s">"MYTAG"</span><span class="p">,</span> <span class="s">" Power from NickelCadmiumBattery"</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>이대로 실행하면 dagger2는 NickelCadmiumBattery에 의존성이 있는지 모르기 때문에 모듈을 만들고 새로 만든 클래스에 Battery 의존성을 제공해야 한다<br />
여기서 새로운 인스턴스를 생성하여 반환하지 않아도 이미 @Inject annotation을 NickelCadmiumBattery 생성자에 달았으므로 dagger2는 의존성을 구성할 수 있다</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// NCBatteryModule.kt</span>
<span class="nd">@Module</span>
<span class="kd">class</span> <span class="nc">NCBatteryModule</span> <span class="p">{</span>

    <span class="nd">@Provides</span>
    <span class="k">fun</span> <span class="nf">providesNCBattery</span><span class="p">(</span><span class="n">nickelCadmiumBattery</span><span class="p">:</span> <span class="nc">NickelCadmiumBattery</span><span class="p">):</span> <span class="nc">Battery</span><span class="p">{</span>
        <span class="k">return</span> <span class="n">nickelCadmiumBattery</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>NickelCadmiumBattery 클래스 생성자에 이미 @Inject annotation을 달았기 때문에 body가 따로 필요하지 않기 때문에 추상 모듈로 만들어도 된다</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// NCBatteryModule.kt</span>
<span class="nd">@Module</span>
<span class="k">abstract</span> <span class="kd">class</span> <span class="nc">NCBatteryModule</span> <span class="p">{</span>

    <span class="nd">@Binds</span>
    <span class="k">abstract</span> <span class="k">fun</span> <span class="nf">bindsNCBattery</span><span class="p">(</span><span class="n">nickelCadmiumBattery</span><span class="p">:</span> <span class="nc">NickelCadmiumBattery</span><span class="p">):</span> <span class="nc">Battery</span>
<span class="p">}</span>
</code></pre></div></div>

<p>이제 dagger2는 의존성을 Battery로 인식한다. 이제 SmartPhoneComponent 인터페이스에 추가해야한다</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// SmartPhoneComponent.kt</span>
<span class="nd">@Component</span><span class="p">(</span><span class="n">modules</span> <span class="p">=</span> <span class="p">[</span><span class="nc">MemoryCardModule</span><span class="o">::</span><span class="k">class</span><span class="p">,</span> <span class="nc">NCBatteryModule</span><span class="o">::</span><span class="k">class</span><span class="p">])</span>
<span class="kd">interface</span> <span class="nc">SmartPhoneComponent</span> <span class="p">{</span>

    <span class="k">fun</span> <span class="nf">getSmartPhone</span><span class="p">():</span> <span class="nc">SmartPhone</span>
<span class="p">}</span>
</code></pre></div></div>

<hr />

<blockquote>
  <p>Field Injection</p>
</blockquote>

<p>MainActivity에서 getSmartPhone함수를 불러주 었는데 더 효율적이지 않다. 10개의 의존성이 있는 경우 모든 의존성에 대한 get 메서드를 작성해야 할 수 도 있다<br />
Field injection을 사용하면 쉽게 액티비티나 프래그먼트에서 사용할 수 있다<br />
SmartPhoneComponent 인터페이스에서 함수 이름을 파라미터로 하는 inject 함수를 만든다</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// SmartPhoneCompent.kt</span>
<span class="nd">@Component</span><span class="p">(</span><span class="n">modules</span> <span class="p">=</span> <span class="p">[</span><span class="nc">MemoryCardModule</span><span class="o">::</span><span class="k">class</span><span class="p">,</span> <span class="nc">NCBatteryModule</span><span class="o">::</span><span class="k">class</span><span class="p">])</span>
<span class="kd">interface</span> <span class="nc">SmartPhoneComponent</span> <span class="p">{</span>

    <span class="k">fun</span> <span class="nf">inject</span><span class="p">(</span><span class="n">mainActivity</span><span class="p">:</span> <span class="nc">MainActivity</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>

<p>이제 MainActivity에서 사용할 수 있다</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// MainActivity.kt</span>
<span class="kd">class</span> <span class="nc">MainActivity</span> <span class="p">:</span> <span class="nc">AppCompatActivity</span><span class="p">()</span> <span class="p">{</span>

    <span class="nd">@Inject</span>
    <span class="k">lateinit</span> <span class="kd">var</span> <span class="py">smartPhone</span><span class="p">:</span> <span class="nc">SmartPhone</span>

    <span class="k">override</span> <span class="k">fun</span> <span class="nf">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">:</span> <span class="nc">Bundle</span><span class="p">?)</span> <span class="p">{</span>
        <span class="k">super</span><span class="p">.</span><span class="nf">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">)</span>
        <span class="nf">setContentView</span><span class="p">(</span><span class="nc">R</span><span class="p">.</span><span class="n">layout</span><span class="p">.</span><span class="n">activity_main</span><span class="p">)</span>

        <span class="nc">DaggerSmartPhoneComponent</span><span class="p">.</span><span class="nf">create</span><span class="p">()</span>
            <span class="p">.</span><span class="nf">inject</span><span class="p">(</span><span class="k">this</span><span class="p">)</span>
        <span class="n">smartPhone</span><span class="p">.</span><span class="nf">makeACallWithRecoding</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<hr />

<blockquote>
  <p>모듈의 상태</p>
</blockquote>

<p>dagger2를 사용할떄 모듈에 상태가 있는 것은 권장되지 않는다. 하지만 몇몇 시나리오에서 모듈 내부에 인스턴스 변수가 필요할 수 있다</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// MemoryCardModule.kt</span>
<span class="nd">@Module</span>
<span class="kd">class</span> <span class="nc">MemoryCardModule</span><span class="p">(</span><span class="kd">val</span> <span class="py">memorySize</span><span class="p">:</span> <span class="nc">Int</span><span class="p">)</span> <span class="p">{</span>

    <span class="nd">@Provides</span>
    <span class="k">fun</span> <span class="nf">providesMemoryCard</span><span class="p">():</span> <span class="nc">MemoryCard</span><span class="p">{</span>
        <span class="nc">Log</span><span class="p">.</span><span class="nf">i</span><span class="p">(</span><span class="s">"LEE2"</span><span class="p">,</span> <span class="s">"Size of the memory is $memorySize"</span><span class="p">)</span>
        <span class="k">return</span> <span class="nc">MemoryCard</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>MainActivity 코드도 모듈 중 적어도 하나는 상태를 가지고 있기 때문에 변경해주어야 한다</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// MainActivity.kt</span>
<span class="kd">class</span> <span class="nc">MainActivity</span> <span class="p">:</span> <span class="nc">AppCompatActivity</span><span class="p">()</span> <span class="p">{</span>

    <span class="nd">@Inject</span>
    <span class="k">lateinit</span> <span class="kd">var</span> <span class="py">smartPhone</span><span class="p">:</span> <span class="nc">SmartPhone</span>

    <span class="k">override</span> <span class="k">fun</span> <span class="nf">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">:</span> <span class="nc">Bundle</span><span class="p">?)</span> <span class="p">{</span>
        <span class="k">super</span><span class="p">.</span><span class="nf">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">)</span>
        <span class="nf">setContentView</span><span class="p">(</span><span class="nc">R</span><span class="p">.</span><span class="n">layout</span><span class="p">.</span><span class="n">activity_main</span><span class="p">)</span>

<span class="c1">//        DaggerSmartPhoneComponent.create()</span>
<span class="c1">//            .inject(this)</span>
<span class="c1">//        smartPhone.makeACallWithRecoding()</span>

        <span class="nc">DaggerSmartPhoneComponent</span><span class="p">.</span><span class="nf">builder</span><span class="p">()</span>
            <span class="p">.</span><span class="nf">memoryCardModule</span><span class="p">(</span><span class="nc">MemoryCardModule</span><span class="p">(</span><span class="mi">1000</span><span class="p">))</span>
            <span class="p">.</span><span class="nf">build</span><span class="p">()</span>
            <span class="p">.</span><span class="nf">inject</span><span class="p">(</span><span class="k">this</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>모듈에 값을 전달하는 방법이다</p>

<hr />

<blockquote>
  <p>Application 클래스</p>
</blockquote>

<p>Application 클래스는 안드로이드 앱의 기본 클래스이다. Application 클래스를 변경할 수 없지만 확장하여 추가 지시를 할 수 있다. Application 클래스와 해당 하위 클래스, 모든 액티비티, 프래그먼트는 인스턴스화 된다. 첫번째 액티비티를 만들기 전에 실행해야 하는 작업이 있으면 Application 클래스를 커스텀 해야한다. 예를 들어 공유 네트웤크 클라이언트 객체와 같은 불변 데이터가 있는 경우<br />
지금까지 MainActivity에서 구성요소를 만들었는데 5개의 액티비티가 있다면 같은 코드를 다섯번 작성해야 해서 비효율적이다<br />
커스텀해보자, Application을 상속하고 onCreate 함수를 오버라이드 한다</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// SmartPhoneApplication</span>
<span class="kd">class</span> <span class="nc">SmartPhoneApplication</span><span class="p">:</span> <span class="nc">Application</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">lateinit</span> <span class="kd">var</span> <span class="py">smartPhoneComponent</span><span class="p">:</span> <span class="nc">SmartPhoneComponent</span>

    <span class="k">override</span> <span class="k">fun</span> <span class="nf">onCreate</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">super</span><span class="p">.</span><span class="nf">onCreate</span><span class="p">()</span>
        <span class="n">smartPhoneComponent</span> <span class="p">=</span> <span class="nf">initDagger</span><span class="p">()</span>
    <span class="p">}</span>

    <span class="k">private</span> <span class="k">fun</span> <span class="nf">initDagger</span><span class="p">():</span> <span class="nc">SmartPhoneComponent</span> <span class="p">=</span>
        <span class="nc">DaggerSmartPhoneComponent</span><span class="p">.</span><span class="nf">builder</span><span class="p">()</span>
            <span class="p">.</span><span class="nf">memoryCardModule</span><span class="p">(</span><span class="nc">MemoryCardModule</span><span class="p">(</span><span class="mi">1000</span><span class="p">))</span>
            <span class="p">.</span><span class="nf">build</span><span class="p">()</span>

<span class="p">}</span>
</code></pre></div></div>

<p>MainActivity에서 Application을 가져오는 코드를 작성하여 smartPhoneComponent 인스턴스를 가져온다</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// MainActivtiy.kt</span>
<span class="kd">class</span> <span class="nc">MainActivity</span> <span class="p">:</span> <span class="nc">AppCompatActivity</span><span class="p">()</span> <span class="p">{</span>

    <span class="nd">@Inject</span>
    <span class="k">lateinit</span> <span class="kd">var</span> <span class="py">smartPhone</span><span class="p">:</span> <span class="nc">SmartPhone</span>

    <span class="k">override</span> <span class="k">fun</span> <span class="nf">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">:</span> <span class="nc">Bundle</span><span class="p">?)</span> <span class="p">{</span>
        <span class="k">super</span><span class="p">.</span><span class="nf">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">)</span>
        <span class="nf">setContentView</span><span class="p">(</span><span class="nc">R</span><span class="p">.</span><span class="n">layout</span><span class="p">.</span><span class="n">activity_main</span><span class="p">)</span>

        <span class="p">(</span><span class="n">application</span> <span class="k">as</span> <span class="nc">SmartPhoneApplication</span><span class="p">).</span><span class="n">smartPhoneComponent</span>
            <span class="p">.</span><span class="nf">inject</span><span class="p">(</span><span class="k">this</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>그리고 생성한 애플리케이션 클래스을 매니페스트 파일에 추가해야한다</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// AndroidManifest.xml</span>
<span class="p">&lt;</span><span class="n">manifest</span> <span class="n">xmlns</span><span class="p">:</span><span class="n">android</span><span class="p">=</span><span class="s">"http://schemas.android.com/apk/res/android"</span>
    <span class="k">package</span><span class="p">=</span><span class="s">"com.lee989898.dagger2"</span><span class="p">&gt;</span>

    <span class="p">&lt;</span><span class="n">application</span>
        <span class="n">android</span><span class="p">:</span><span class="n">name</span><span class="p">=</span><span class="s">".SmartPhoneApplication"</span>
    <span class="p">&lt;/</span><span class="n">application</span><span class="p">&gt;</span>

<span class="p">&lt;/</span><span class="n">manifest</span><span class="p">&gt;</span>
</code></pre></div></div>

<p>그런데 화면 회전을 하면 다시 새로운 스마트폰 객체를 만들고 Inject 함수를 다시 불러서 호출할 때마다 메모리에 새로운 스마트폰 객체를 생성한다. 매우 비효율적이고 오류가 발생할 수 도 있다 @Singleton annotation을 사용하여 이를 쉽게 피할 수 있다</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// SmartPhone.kt</span>
<span class="nd">@Singleton</span>
<span class="kd">class</span> <span class="nc">SmartPhone</span> <span class="nd">@Inject</span> <span class="k">constructor</span><span class="p">(</span><span class="kd">val</span> <span class="py">battery</span><span class="p">:</span> <span class="nc">Battery</span><span class="p">,</span> <span class="kd">val</span> <span class="py">simCard</span><span class="p">:</span> <span class="nc">SIMCard</span><span class="p">,</span> <span class="kd">val</span> <span class="py">memoryCard</span><span class="p">:</span> <span class="nc">MemoryCard</span><span class="p">)</span> <span class="p">{</span>

    <span class="nf">init</span> <span class="p">{</span>
        <span class="n">battery</span><span class="p">.</span><span class="nf">getPower</span><span class="p">()</span>
        <span class="n">simCard</span><span class="p">.</span><span class="nf">getConnection</span><span class="p">()</span>
        <span class="n">memoryCard</span><span class="p">.</span><span class="nf">getSpaceAvailability</span><span class="p">()</span>
        <span class="nc">Log</span><span class="p">.</span><span class="nf">i</span><span class="p">(</span><span class="s">"LEE2"</span><span class="p">,</span> <span class="s">"SmartPhone Constructed"</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="k">fun</span> <span class="nf">makeACallWithRecoding</span><span class="p">(){</span>
        <span class="nc">Log</span><span class="p">.</span><span class="nf">i</span><span class="p">(</span><span class="s">"LEE2"</span><span class="p">,</span> <span class="s">"Calling..."</span><span class="p">)</span>
    <span class="p">}</span>

<span class="p">}</span>
</code></pre></div></div>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// SmartPhoneComponents.kt</span>
<span class="nd">@Singleton</span>
<span class="nd">@Component</span><span class="p">(</span><span class="n">modules</span> <span class="p">=</span> <span class="p">[</span><span class="nc">MemoryCardModule</span><span class="o">::</span><span class="k">class</span><span class="p">,</span> <span class="nc">NCBatteryModule</span><span class="o">::</span><span class="k">class</span><span class="p">])</span>
<span class="kd">interface</span> <span class="nc">SmartPhoneComponent</span> <span class="p">{</span>

    <span class="k">fun</span> <span class="nf">inject</span><span class="p">(</span><span class="n">mainActivity</span><span class="p">:</span> <span class="nc">MainActivity</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>

                </div>
            </section>

            <!-- Email subscribe form at the bottom of the page -->
            <!--
            
                <section class="subscribe-form">
                    <h3 class="subscribe-form-title">Subscribe to LEE</h3>
                    <p>Get the latest posts delivered right to your inbox</p>
                    <span id="searchform" method="post" action="/subscribe/" class="">
    <input class="confirm" type="hidden" name="confirm"  />
    <input class="location" type="hidden" name="location"  />
    <input class="referrer" type="hidden" name="referrer"  />

    <div class="form-group">
        <input class="subscribe-email" onkeyup="myFunc()"
               id="searchtext" type="text" name="searchtext"
               placeholder="Search..." />
    </div>
    <script type="text/javascript">
        function myFunc() {
            if(event.keyCode == 13) {
                var url = encodeURIComponent($("#searchtext").val());
                location.href = "/search.html?query=" + url;
            }
        }
    </script>
</span>
                </section>
            
            -->


            <footer class="post-full-footer">
                <!-- Everything inside the #author tags pulls data from the author -->
                <!-- #author-->
                
                    
                        <section class="author-card">
                            
                                <img class="author-profile-image" src="/assets/built/images/author-logo.jpg" alt="lee989898" />
                            
                            <section class="author-card-content">
                                <h4 class="author-card-name"><a href="/author/lee989898">lee989898</a></h4>
                                
                                    <p><a href="https://github.com/lee989898">깃허브</a></p>
                                
                            </section>
                        </section>
                        <div class="post-full-footer-right">
                            <a class="author-card-button" href="/author/lee989898">Read More</a>
                        </div>
                    
                
                <!-- /author  -->
            </footer>

            <!-- If you use Disqus comments, just uncomment this block.
            The only thing you need to change is "test-apkdzgmqhj" - which
            should be replaced with your own Disqus site-id. -->
            
                <section class="post-full-comments">
                    <div id="disqus_thread"></div>
                    <script>
                        var disqus_config = function () {
                            var this_page_url = 'https://lee989898.github.io/ad';
                            var this_page_identifier = '/ad';
                            var this_page_title = 'Dagger2';
                        };
                        (function() {
                            var d = document, s = d.createElement('script');
                            s.src = 'https://xxxxxxxx.disqus.com/embed.js';
                            s.setAttribute('data-timestamp', +new Date());
                            (d.head || d.body).appendChild(s);
                        })();
                    </script>
                </section>
            

        </article>

    </div>
</main>

<!-- Links to Previous/Next posts -->
<aside class="read-next outer">
    <div class="inner">
        <div class="read-next-feed">
            
                
                
                
                
                    <article class="read-next-card"
                        
                            style="background-image: url(/assets/built/images/blog-cover1.png)"
                        
                    >
                        <header class="read-next-card-header">
                            <small class="read-next-card-header-sitetitle">&mdash; LEE &mdash;</small>
                            
                                <h3 class="read-next-card-header-title"><a href="/tag/android/">Android</a></h3>
                            
                        </header>
                        <div class="read-next-divider"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 14.5s2 3 5 3 5.5-2.463 5.5-5.5S21 6.5 18 6.5c-5 0-7 11-12 11C2.962 17.5.5 15.037.5 12S3 6.5 6 6.5s4.5 3.5 4.5 3.5"/></svg>
</div>
                        <div class="read-next-card-content">
                            <ul>
                                
                                
                                  
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/ad">Work Manager</a></li>
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/ad">Notification</a></li>
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/ad">Retrofit</a></li>
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                            </ul>
                        </div>
                        <footer class="read-next-card-footer">
                            <a href="/tag/android/">
                                
                                    See all 19 posts  →
                                
                            </a>
                        </footer>
                    </article>
                
            

            <!-- If there's a next post, display it using the same markup included from - partials/post-card.hbs -->
            

            <!-- If there's a previous post, display it using the same markup included from - partials/post-card.hbs -->
            
                

    <article class="post-card post-template">
        
            <a class="post-card-image-link" href="/ad">
                <div class="post-card-image" style="background-image: url(/assets/built/images/android-logo.png)"></div>
            </a>
        
        <div class="post-card-content">
            <a class="post-card-content-link" href="/ad">
                <header class="post-card-header">
                    
                        
                            
                                <span class="post-card-tags">Android</span>
                            
                        
                    

                    <h2 class="post-card-title">Work Manager</h2>
                </header>
                <section class="post-card-excerpt">
                    
                        <p>
  WorkManager


</p>
                    
                </section>
            </a>
            <footer class="post-card-meta">
                
                    
                        
                        <img class="author-profile-image" src="/assets/built/images/author-logo.jpg" alt="lee989898" />
                        
                        <span class="post-card-author">
                            <a href="/author/lee989898/">lee989898</a>
                        </span>
                    
                
                <span class="reading-time">
                    
                    
                      6 min read
                    
                </span>
            </footer>
        </div>
    </article>

            

        </div>
    </div>
</aside>

<!-- Floating header which appears on-scroll, included from includes/floating-header.hbs -->
<div class="floating-header">
    <div class="floating-header-logo">
        <a href="https://lee989898.github.io/">
            
            <span>LEE</span>
        </a>
    </div>
    <span class="floating-header-divider">&mdash;</span>
    <div class="floating-header-title">Dagger2</div>
    <div class="floating-header-share">
        <div class="floating-header-share-label">Share this <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
    <path d="M7.5 15.5V4a1.5 1.5 0 1 1 3 0v4.5h2a1 1 0 0 1 1 1h2a1 1 0 0 1 1 1H18a1.5 1.5 0 0 1 1.5 1.5v3.099c0 .929-.13 1.854-.385 2.748L17.5 23.5h-9c-1.5-2-5.417-8.673-5.417-8.673a1.2 1.2 0 0 1 1.76-1.605L7.5 15.5zm6-6v2m-3-3.5v3.5m6-1v2"/>
</svg>
</div>
        <a class="floating-header-share-tw" href="https://twitter.com/share?text=Dagger2&amp;url=https://lee989898.github.io/ad"
            onclick="window.open(this.href, 'share-twitter', 'width=550,height=235');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg>

        </a>
        <a class="floating-header-share-fb" href="https://www.facebook.com/sharer/sharer.php?u=https://lee989898.github.io/ad"
            onclick="window.open(this.href, 'share-facebook','width=580,height=296');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M19 6h5V0h-5c-3.86 0-7 3.14-7 7v3H8v6h4v16h6V16h5l1-6h-6V7c0-.542.458-1 1-1z"/></svg>

        </a>
    </div>
    <progress class="progress" value="0">
        <div class="progress-container">
            <span class="progress-bar"></span>
        </div>
    </progress>
</div>


<!-- /post -->

<!-- The #contentFor helper here will send everything inside it up to the matching #block helper found in default.hbs -->


        <!-- Previous/next page links - displayed on every page -->
        

        <!-- The footer at the very bottom of the screen -->
        <footer class="site-footer outer">
            <div class="site-footer-content inner">
                <section class="copyright"><a href="https://lee989898.github.io/">LEE</a> &copy; 2022</section>
                <section class="poweredby">Proudly published with <a href="https://jekyllrb.com/">Jekyll</a> &
                    <a href="https://pages.github.com/" target="_blank" rel="noopener">GitHub Pages</a> using
                    <a href="https://github.com/jekyllt/jasper2" target="_blank" rel="noopener">Jasper2</a></section>
                <nav class="site-footer-nav">
                    <a href="/">Latest Posts</a>
                    
                    
                    <a href="https://ghost.org" target="_blank" rel="noopener">Ghost</a>
                </nav>
            </div>
        </footer>

    </div>

    <!-- The big email subscribe modal content -->
    
    <div id="subscribe" class="subscribe-overlay">
        <a class="subscribe-overlay-close" href="#"></a>
        <div class="subscribe-overlay-content">
            
            <h1 class="subscribe-overlay-title">Search LEE</h1>
            <p class="subscribe-overlay-description">
                lunr.js를 이용한 posts 검색 </p>
            <span id="searchform" method="post" action="/subscribe/" class="">
    <input class="confirm" type="hidden" name="confirm"  />
    <input class="location" type="hidden" name="location"  />
    <input class="referrer" type="hidden" name="referrer"  />

    <div class="form-group">
        <input class="subscribe-email" onkeyup="myFunc()"
               id="searchtext" type="text" name="searchtext"
               placeholder="Search..." />
    </div>
    <script type="text/javascript">
        function myFunc() {
            if(event.keyCode == 13) {
                var url = encodeURIComponent($("#searchtext").val());
                location.href = "/search.html?query=" + url;
            }
        }
    </script>
</span>
        </div>
    </div>
    

    <!-- highlight.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.10.0/components/prism-abap.min.js"></script>
    <script>$(document).ready(function() {
      $('pre code').each(function(i, block) {
        hljs.highlightBlock(block);
      });
    });</script>

    <!-- jQuery + Fitvids, which makes all video embeds responsive -->
    <script
        src="https://code.jquery.com/jquery-3.2.1.min.js"
        integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
        crossorigin="anonymous">
    </script>
    <script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="https://demo.ghost.io/assets/js/jquery.fitvids.js?v=724281a32e"></script>


    <!-- Paginator increased to "infinit" in _config.yml -->
    <!-- if paginator.posts  -->
    <!-- <script>
        var maxPages = parseInt('');
    </script>
    <script src="/assets/js/infinitescroll.js"></script> -->
    <!-- /endif -->

    


    <!-- Add Google Analytics  -->
    <!-- Google Analytics Tracking code -->
 <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-xxxxxxxx-x', 'auto');
  ga('send', 'pageview');

 </script>


    <!-- The #block helper will pull in data from the #contentFor other template files. In this case, there's some JavaScript which we only want to use in post.hbs, but it needs to be included down here, after jQuery has already loaded. -->
    
        <script>

// NOTE: Scroll performance is poor in Safari
// - this appears to be due to the events firing much more slowly in Safari.
//   Dropping the scroll event and using only a raf loop results in smoother
//   scrolling but continuous processing even when not scrolling
$(document).ready(function () {
    // Start fitVids
    var $postContent = $(".post-full-content");
    $postContent.fitVids();
    // End fitVids

    var progressBar = document.querySelector('progress');
    var header = document.querySelector('.floating-header');
    var title = document.querySelector('.post-full-title');

    var lastScrollY = window.scrollY;
    var lastWindowHeight = window.innerHeight;
    var lastDocumentHeight = $(document).height();
    var ticking = false;

    function onScroll() {
        lastScrollY = window.scrollY;
        requestTick();
    }

    function onResize() {
        lastWindowHeight = window.innerHeight;
        lastDocumentHeight = $(document).height();
        requestTick();
    }

    function requestTick() {
        if (!ticking) {
            requestAnimationFrame(update);
        }
        ticking = true;
    }

    function update() {
        var trigger = title.getBoundingClientRect().top + window.scrollY;
        var triggerOffset = title.offsetHeight + 35;
        var progressMax = lastDocumentHeight - lastWindowHeight;

        // show/hide floating header
        if (lastScrollY >= trigger + triggerOffset) {
            header.classList.add('floating-active');
        } else {
            header.classList.remove('floating-active');
        }

        progressBar.setAttribute('max', progressMax);
        progressBar.setAttribute('value', lastScrollY);

        ticking = false;
    }

    window.addEventListener('scroll', onScroll, {passive: true});
    window.addEventListener('resize', onResize, false);

    update();
});
</script>

    

    <!-- Ghost outputs important scripts and data with this tag - it should always be the very last thing before the closing body tag -->
    <!-- ghost_foot -->

</body>
</html>
