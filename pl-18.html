<!DOCTYPE html>
<html>
<head>

    <!-- Document Settings -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <!-- Base Meta -->
    <!-- dynamically fixing the title for tag/author pages -->



    <title>Concurrency</title>
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Styles'n'Scripts -->
    <link rel="stylesheet" type="text/css" href="/assets/built/screen.css" />
    <link rel="stylesheet" type="text/css" href="/assets/built/screen.edited.css" />
    <link rel="stylesheet" type="text/css" href="/assets/built/syntax.css" />
    <!-- highlight.js -->

    <!-- custom.css -->
    <link rel="stylesheet" type="text/css" href="/assets/built/custom.css" />

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

    <!-- 웹 폰트 -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/earlyaccess/nanumgothic.css">

    <!-- syntax.css -->
    <link rel="stylesheet" type="text/css" href="/assets/built/syntax.css" />

    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css">
    <style>.hljs { background: none; }</style>

    <!--[if IE]>
        <style>
            p, ol, ul{
                width: 100%;
            }
            blockquote{
                width: 100%;
            }
        </style>
    <![endif]-->
    
    <!-- This tag outputs SEO meta+structured data and other important settings -->
    <meta name="description" content="공부 블로그" />
    <link rel="shortcut icon" href="https://lee989898.github.io/assets/built/images/favicon.jpg" type="image/png" />
    <link rel="canonical" href="https://lee989898.github.io/pl-18" />
    <meta name="referrer" content="no-referrer-when-downgrade" />

    


     <!--title below is coming from _includes/dynamic_title-->
    <meta property="og:site_name" content="LEE" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Concurrency" />
    <meta property="og:description" content="Comcurrency 동시 실행은 인스트럭션 수준, 문장 수준, 서브프로그램 수준, 프로그램 수준, 이렇게 4개 수준에서 이루어 질 수 있다 인스트럭션 수준에서는 두개 이상의 머신 인스트럭션을 동시에 실행한다. 문장 수준에서는 두개 이상의 고급언어 문장을 동시에 실행한다. 서브프로그램 수준에서는 두개 이상의 서브프로그램을 동시에 실행한다. 프로그램 수준에서는 두개 이상의 프로그램을 동시에 실행한다 동시 실행" />
    <meta property="og:url" content="https://lee989898.github.io/pl-18" />
    <meta property="og:image" content="https://lee989898.github.io/assets/built/images/pl-background-frontend.png" />
    <meta property="article:publisher" content="https://www.facebook.com/" />
    <meta property="article:author" content="https://www.facebook.com/" />
    <meta property="article:published_time" content="2021-11-10T19:18:00+09:00" />
    <meta property="article:modified_time" content="2021-11-10T19:18:00+09:00" />
    <meta property="article:tag" content="Pl" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Concurrency" />
    <meta name="twitter:description" content="Comcurrency 동시 실행은 인스트럭션 수준, 문장 수준, 서브프로그램 수준, 프로그램 수준, 이렇게 4개 수준에서 이루어 질 수 있다 인스트럭션 수준에서는 두개 이상의 머신 인스트럭션을 동시에 실행한다. 문장 수준에서는 두개 이상의 고급언어 문장을 동시에 실행한다. 서브프로그램 수준에서는 두개 이상의 서브프로그램을 동시에 실행한다. 프로그램 수준에서는 두개 이상의 프로그램을 동시에 실행한다 동시 실행" />
    <meta name="twitter:url" content="https://lee989898.github.io/" />
    <meta name="twitter:image" content="https://lee989898.github.io/assets/built/images/pl-background-frontend.png" />
    <meta name="twitter:label1" content="Written by" />
    <meta name="twitter:data1" content="LEE" />
    <meta name="twitter:label2" content="Filed under" />
    <meta name="twitter:data2" content="Pl" />
    <meta name="twitter:site" content="@" />
    <meta name="twitter:creator" content="@" />
    <meta property="og:image:width" content="1400" />
    <meta property="og:image:height" content="933" />

    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Website",
    "publisher": {
        "@type": "Organization",
        "name": "LEE",
        "logo": "https://lee989898.github.io/"
    },
    "url": "https://lee989898.github.io/pl-18",
    "image": {
        "@type": "ImageObject",
        "url": "https://lee989898.github.io/assets/built/images/pl-background-frontend.png",
        "width": 2000,
        "height": 666
    },
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://lee989898.github.io/pl-18"
    },
    "description": "Comcurrency 동시 실행은 인스트럭션 수준, 문장 수준, 서브프로그램 수준, 프로그램 수준, 이렇게 4개 수준에서 이루어 질 수 있다 인스트럭션 수준에서는 두개 이상의 머신 인스트럭션을 동시에 실행한다. 문장 수준에서는 두개 이상의 고급언어 문장을 동시에 실행한다. 서브프로그램 수준에서는 두개 이상의 서브프로그램을 동시에 실행한다. 프로그램 수준에서는 두개 이상의 프로그램을 동시에 실행한다 동시 실행"
}
    </script>

    <!-- <script type="text/javascript" src="https://demo.ghost.io/public/ghost-sdk.min.js?v=724281a32e"></script>
    <script type="text/javascript">
    ghost.init({
    	clientId: "ghost-frontend",
    	clientSecret: "f84a07a72b17"
    });
    </script> -->

    <meta name="generator" content="Jekyll 3.6.2" />
    <link rel="alternate" type="application/rss+xml" title="Concurrency" href="/feed.xml" />


</head>
<body class="post-template">

    <div class="site-wrapper">
        <!-- All the main content gets inserted here, index.hbs, post.hbs, etc -->
        <!-- default -->

<!-- The tag above means: insert everything in this file
into the {body} of the default.hbs template -->

<header class="site-header outer">
    <div class="inner">
        <nav class="site-nav">
    <div class="site-nav-left">
        
            
                <a class="site-nav-logo" href="https://lee989898.github.io/">LEE</a>
            
        
        
            <ul class="nav" role="menu">
    <li class="nav-home" role="menuitem"><a href="/">Home</a></li>
    <li class="nav-about" role="menuitem"><a href="/about/">About</a></li>
    <li class="nav-kotlin" role="menuitem"><a href="/tag/kotlin/">코틀린</a></li>
    <li class="nav-algorithm" role="menuitem"><a href="/tag/algorithm/">알고리즘</a></li>
    <li class="nav-pl" role="menuitem"><a href="/tag/pl/">프로그래밍언어</a></li>
    <li class="nav-android" role="menuitem"><a href="/tag/android/">안드로이드</a></li>
    <li class="nav-security" role="menuitem"><a href="/tag/security/">컴퓨터보안</a></li>
    <li class="nav-system" role="menuitem"><a href="/tag/system/">시스템프로그래밍</a></li>
    <li class="nav-systemcloud" role="menuitem"><a href="/tag/systemcloud/">시스템클라우드보안</a></li>
    <li class="nav-blockchain" role="menuitem"><a href="/tag/blockchain/">블록체인</a></li>
    <li class="nav-archive" role="menuitem">
        
        <a href="/archive.html">All Posts</a>
    </li>
    <li class="nav-archive" role="menuitem">
        <a href="/author_archive.html">Tag별 Posts</a>
    </li>


</ul>



        
    </div>
    <div class="site-nav-right">
        <div class="social-links">
            
            
        </div>
        
            <a class="subscribe-button" href="#subscribe">Search</a>
        
    </div>
</nav>

    </div>
</header>

<!-- Everything inside the #post tags pulls data from the post -->
<!-- #post -->

<main id="site-main" class="site-main outer" role="main">
    <div class="inner">

        <article class="post-full  tag-pl post tag-study ">

            <header class="post-full-header">
                <section class="post-full-meta">
                    <time class="post-full-meta-date" datetime="10 November 2021">10 November 2021</time>
                    
                        <span class="date-divider">/</span>
                        
                            
                               <a href='/tag/pl/'>PL</a>
                            
                        
                    
                </section>
                <h1 class="post-full-title">Concurrency</h1>
            </header>

            <!--
            
            <figure class="post-full-image" style="background-image: url(/assets/built/images/pl-background-frontend.png)">
            </figure>
            
            -->
            <section class="post-full-content">
                <div class="kg-card-markdown">
                    <h3 id="comcurrency"><strong>Comcurrency</strong></h3>

<hr />

<p>동시 실행은 인스트럭션 수준, 문장 수준, 서브프로그램 수준, 프로그램 수준, 이렇게 4개 수준에서 이루어 질 수 있다</p>

<p>인스트럭션 수준에서는 두개 이상의 머신 인스트럭션을 동시에 실행한다. 문장 수준에서는 두개 이상의 고급언어 문장을 동시에 실행한다. 서브프로그램 수준에서는 두개 이상의 서브프로그램을 동시에 실행한다. 프로그램 수준에서는 두개 이상의 프로그램을 동시에 실행한다</p>

<p>동시 실행 통제 메커니즘은 프로그래밍의 유연성을 증가시킨다<br />
동시 실행 통제 메커니즘은 원래 운영체제의 문제를 풀기 위해 발명되었으나, ​다양한 응용 프로그램에서도 요구된다</p>

<p>프로그램 수준의 동시 실행 사례는 웹에서 볼 수 있다<br />
웹 브라우저는 다음과 같은 여러가지 기능을 동시에 실행해야 한다</p>

<ul>
  <li>웹 서버에게 데이터를 주고 받기</li>
  <li>텍스트와 이미지를 스크린에 렌더링하기​</li>
  <li>마우스와 키보드에 의한 사용자 액션에 대응하기</li>
</ul>

<p>IE9는 별도의 코어를 사용하여 클라이언트 측의 스크립트 코드를 인터프러터 방식으로 처리한다.  ​</p>

<p>문장 수준의 동시 실행은 프로그램 수준의 경우와 매우 다르다<br />
언어 설계자는 문장 수준의 동시 실행을 위해 다음에 대해 중점을 둔다</p>

<ul>
  <li>데이터를 다수의 메모리에 어떻게 분산시킬 것인가? ​</li>
  <li>어느 문장을 동시 실행할 것인가?</li>
</ul>

<p>동시 실행 알고리즘은 확장성이 있어야 한다<br />
사용하는 프로세서의 수를 증가시킬수록 실행 속도가 증가하면, 확장성이 있다고 말한다</p>

<p>알고리즘은 이식성이 있어야 한다<br />
알고리즘이 다른 아키텍처의 기계에서 효율적으로 실행된다면, ​이 알고리즘은 이식성이 있다고 말한다<br />
이식성은 하드웨어의 수명이 비교적 짧아지고 있어서, 매우 중요하다</p>

<p>플린은 컴퓨터를 다음과 같이 분류하였다</p>

<ul>
  <li>SISD는 하나의 인스트럭션이 하나의 데이터를 처리하는 것으로, ​프로세서가 하나인 컴퓨터가 이에 속한다</li>
  <li>SIMD는 하나의 인스트럭션으로 여러 데이터를 처리한다. ​벡터 프로세서가 이에 속하며, 벡터 프로세서는 벡터 연산자의 여러 오퍼랜드를 저장하는 여러 개의 레지스터를 갖고 있어서, ​이들 여러 오퍼랜드에 대해 하나의 인스트럭션을 실행한다</li>
  <li>MISD는 하나의 데이터에 대해 다수의 인스트럭션을 차례로 동시 실행한다. ​마치 파이프라인처럼, 파이프라인 컴퓨터가 이에 속한다 ​</li>
  <li>MIMD는 다수의 인스트럭션이 다수의 데이터를 동시 실행한다. MIMD는 여러 개의 프로세서로 구성되며, 각 프로세서는 자신의 인스트럭션 스트림을 처리한다
    <ul>
      <li>​MIMD 컴퓨터에는 분산형과 공유 메모리형, 두가지 유형이 있다. ​분산 MIMD 머신은 하나의 랙에 구성되거나 각 지역에 분산되어 구성되며, ​각 프로세서는 자신의 고유 메모리를 갖는다</li>
      <li>공유메모리 MIMD 머신은 여러 프로세서가 하나의 메모리를 공유하며, ​메모리 액세스의 충돌을 방지하기 위한 동기화 수단을 제공해야 한다</li>
    </ul>
  </li>
</ul>

<p>플린의 분류에 따라, 각각의 머신을 그림으로 표현하면 이 아래 그림과 같다. PU는 프로세싱 유닛으로 싱글 코어 및 멀티코어 프로세서이다</p>

<p><img src="\assets\built\images\pl\pl48.png" alt="프로그래밍언어" /></p>

<p>동시 실행을 필요로 하는 이유는 다음과 같다</p>

<ul>
  <li>프로그램이 하드웨어를 동시에 사용하도록 설계되었다면, ​멀티 프로세서 머신에서 프로그램의 실행 속도는 빠르다</li>
  <li>프로그램이 컴퓨트 바운드가 아니라면, ​싱글 프로세서 머신에서 실행하더라도, ​동시 실행하도록 짜여진 프로그램은 순차 실행하도록 짜여진 프로그램보다 빠르다</li>
  <li>동시 실행은 문제 해결책에 대한 다른 방식의 개념화 방법을 제공한다. 문제의 해결책을 설계할 때 Recursion이 자연스러운 방법인 경우가 있는 것처럼, ​동시 실행이 자연스러운 문제가 많이 있다<br />
예를 들어 시뮬레이션은 여러 개의 엔티티를 포함하고, ​여러 엔티티가 자신에게 주어진 역할을 수행한다. 이때 각 엔티티는 서로 종속되어 있지 않기 때문에 동시 실행이 가능하다. 이와 같이 문제에 따라서 동시 실행이 자연스러운 경우가 있다</li>
  <li>어플리케이션 프로그램을 여러 머신에 분산시켜야 하는 경우가 있다.  ​이때, 각 머신은 특정 타스크(동시 실행 통제 메커니즘)를 실행하면서, 프로그램 실행을 동기화해야 한다</li>
</ul>

<hr />

<h2 id="semaphore"><strong>Semaphore</strong></h2>

<hr />

<p>프로그램이 여러 서브프로그램으로 구성되어 있을 때, ​동일 프로그램 내의 다른 서브프로그램과 동시 실행되는 서브프로그램을 Task 또는 Process라고 한다</p>

<p>자바에서는 특정 메소드, 즉 run method가 Task의 역할을 하며, ​이 메소드는 쓰레드라고 불리는 객체 내에서 실행된다</p>

<p>동시 실행되는 Task들 간에 실행 순서를 통제하는 것을 동기화라고 한다<br />
협력적 동기화는 Task A가 Task B의 종료를 기다렸다가, Task B의 종료 후 Task A가 실행하는 방식으로, 실행 순서를 통제한다<br />
경쟁적 동기화는 Task A, B가 공유 변수(데이터 위치) x를 접근할 필요가 있다면, ​Task B가 x를 접근하고 있는 동안, Task A는 Task B가 x의 접근을 종료하기를 기다리는 방식으로 실행 순서를 통제한다</p>

<p>가장 단순한 형태의 협력적 동기화의 예로 생산자-소비자 문제를 들 수 있다<br />
하나의 서브 프로그램(생산자)이 데이터를 생산하고, ​다른 서브프로그램(소비자)이 그것을 소비한다. 생산된 데이터는 보통 스토리지 버퍼에 저장된다</p>

<p>경쟁적 동기화는 두 Task가 정확히 동시에 공유 변수에 대한 접근을 방지해야 한다</p>

<p>만일 TOTAL이 공유 변수이고, ​Task A가 TOTAL+1, Task B가 TOTAL*2고 Task A, B가 동시에 TOTAL을 변경하고자 한다면, ​이들 간에 공유 변수에 대한 레이스 컨디션이 발생한다<br />
이를 해결하기 위해 상호배제를 보장해 줘야 하는데, ​이때 데드락이 발생할 수 있다. 따라서 데드락 방지책도 함께 제공해야한다</p>

<p>동시 실행을 위한 언어 설계 시, 고려사항은 다음과 같다</p>

<ul>
  <li>경쟁 및 협업 동기화​</li>
  <li>Task 스케줄링​</li>
  <li>Task를 언제 어떻게 생성하고, Task의 실행을 언제 어떻게 시작 및 종료시킬 것인가?</li>
</ul>

<p>세마포어는 Task 동기화에 사용되는 단순한 메커니즘이다<br />
세마포어는 카운터(정수)와 Task 서술자를 저장하는 큐로 구성되며, ​Task 서술자는 Task 실행 상태에 관한 모든 관련 정보를 저장한다. 연산자는 wait, release가 있다</p>

<p>협력 동기화를 위한 세마포어 변수는 다음과 같다<br />
엠티스팟 세마포어는 엠티스팟 카운터와 엠티스팟 큐로 구성되며, ​풀스팟 세마포어는 풀스팟 카운터와 풀스팟 튜로 구성된다</p>

<p>엠티스팟 카운터는 버퍼의 비어있는 칸의 수를 나타내고,​ 풀 카운터는 버퍼의 채워진 칸의 수를 나타낸다</p>

<p>엠티스팟 큐는 버퍼에 빈칸이 생기기(즉, 아이템이 나가기)를 기다리는 생산자의 Task를 저장하고, 풀스팟 큐는 버퍼에 아이템이 채워지기를 기다리는 소비자의 Task를 저장한다</p>

<p>협력 동기화를 위해 필요한 공유 버퍼에 대한 연산자는 ​디파짓과 펫치가 있다</p>

<p>먼저 디파짓을 살펴 보면, ​디파짓은 공유 버퍼에 데이터를 넣기 위한 생산자의 액션으로 다음과 같이 진행된다​</p>

<ul>
  <li>버퍼에 빈칸이 있는지 엠티스팟 세마포어를 검사한다​</li>
  <li>만일 적어도 하나 있으면, 디파짓을 실행하고, 엠티스팟의 카운터를 -1 하고, 풀스팟의 카운터를 +1한다 (버퍼에 채워진 칸이 하나 이상 있다는 것을 나타냄)​</li>
  <li>만일 버퍼가 꽉차면, 엠티스팟 큐에 생산자의 Task 서술자를 넣고, 버퍼에 빈칸이 생길 때까지 기다린다</li>
</ul>

<p>다음, 펫치를 살펴 보자<br />
펫치는 버퍼로부터 데이터를 빼내기 위한 소비자의 액션으로 다음과 같이 진행된다<br />
버퍼가 비어있지 않은지 풀스팟 세마포어를 검사한다. 만일 비어있지 않다면, 펫치를 실행하고(버퍼로부터 데이터를 빼내고), 엠티스팟 카운터를 -1하고, 풀스팟 카운터를 +1한다<br />
만일 버퍼가 비어있다면, 풀스팟 큐에 소비자의 Task 서술자를 넣고, 데이터가 생길 때까지 기다린다</p>

<p>앞의 버퍼에 대한 연산에서 보았듯이, 디파짓과 펫치는 ​세마포어의 카운터와 버퍼에 대한 조작(+, -, 디파짓, 펫치)을 수반한다</p>

<p>디파짓과 펫치는, ​이 연산을 세마포어에 대해 직접 수행할 수 있지만, 세마포어에 대한 ‘연산’을 별도로 정의하고, 이를 통해 세마포어 조작을 간접적으로 수행하기도 한다</p>

<p>이때 세마포어에 대한 연산은 wait(빨간불)과 release(초록불)이다<br />
wait에서, 카운터가 0보다 크면 카운터 -1한다. 만일 카운터가 0보다 크지 않으면, 큐에 Task 서술자를 넣고 기다린다​<br />
release에서, 큐가 비어 있으면, 카운터를 +1한다. 만일 큐가 비어 있지 않으면, 큐에서 Task를 빼서 실행한다</p>

<p>컴피티션이 언제 어디에서 일어나는가?<br />
Shared variable을 서로 갱신하겠다고 동시에 요청할 때 발생한다<br />
이때 shared variable에 대한 mutual exclusion(상호배제)를 위해 ​별도의 세마포어가 필요하다<br />
그런데 이 세마포어는 카운터가 필요없다. 이러한 이유로 이진 세마포어로 정의한다<br />
만일 앞의 shared buffer의 협력적 동기화 문제에서, ​한번에 하나의 Task만 버퍼에 접근할 수 있다고 제한한다면, Shared buffer에 대한 별도의 이진 세마포어가 필요하다</p>

<p>브린치 한센이 세마포어에 대해 말하기를, ​세마포어는 무결점의 프로그래머를 위한 동기화 도구이다<br />
그러나 이런 프로그래머는 매우 드물다. ​따라서, 세마포어의 사용은 동기화의 신뢰성 문제를 야기한다</p>

<hr />

<h2 id="monitor"><strong>Monitor</strong></h2>

<hr />

<p>세마포어의 사용은 동기화의 신뢰성 문제를 야기한다</p>

<p>모니터는 이와 같이 동기화의 신뢰성 문제를 해결하기 위한 방법으로</p>

<ul>
  <li>공유 데이터 구조를 연산자로 캡슐화하여 ​</li>
  <li>프로그래머로부터 공유 데이터구조의 상세 사항을 숨긴다</li>
</ul>

<p>이렇게 하여 동기화에 대한 책임을 런타임 시스템으로 돌린다 ​</p>

<p>모니터는 class로 구현될 수 있다​</p>

<ul>
  <li>공유 데이터 타입을 갖는 추상 데이터 타입으로 표현 ​</li>
  <li>이 클래스의 객체에 대한 접근은 액세스 메소드에 동기화 modifier를 추가하여 통제한다</li>
</ul>

<p>모니터는 concurrent pascal, ada, java 등에서 지원된다</p>

<p>사용자 프로그램은 모니터를 사용하여 공유 버퍼에 접근한다</p>

<ul>
  <li>공유 데이터는 사용자 프로그램 안에 없고, 모니터 안에 있다 ​</li>
  <li>액세스 메커니즘은 모니터(런타임 시스템)의 일부분으로, 상호 배제를 보장한다. 즉, 모니터가 바쁠 땐, 모니터에 대한 호출이 block되고 큐에 들어가서 기다린다</li>
</ul>

<p><img src="\assets\built\images\pl\pl49.png" alt="프로그래밍언어" /></p>

<p>위 그림은 모니터를 표현한 것이다. 모니터는 상호배제만을 제공하기 때문에, ​협력 동기화에서 요구되는 프로세스 간의 협력은 프로그래머가 코딩해야 한다</p>

<hr />

<h2 id="자바-쓰레드"><strong>자바 쓰레드</strong></h2>

<hr />

<p>쓰레드는 run 메소드를 실행하는 프로세스이다<br />
즉, run 메소드는 쓰레드에 할당되어야 실행된다. 쓰레드 클라스는 쓰레드가 아닌 다른 클라스의 부모가 될 수 없고, ​쓰레드의 서브 클래스에게 서비스를 제공한다</p>

<p>Run method는 자바에서 동시 실행 단위로서, ​Run 메소드 코드는 main 메소드, 다른 run 메소드 등과 동시 실행 된다</p>

<p>Run 메소드로 클라스를 정의하는 방법은 두 가지가 있다</p>

<ul>
  <li>첫째 방법은, 쓰레드 클래스의 서브클래스를 정의하여 서브 클라스의 run 메소드로 오버라이드하는 방법이다. 만일 새로운 서브 클래스가 다른 부모를 갖고 있으면, 이 방법은 동작하지 않는다</li>
  <li>둘째 방법은, 다른 부모로부터 상속된 서브 클래스를 정의하고 runnable 인터페이스를 구현하는 방법이다. Runnable은 run 메소드 프로토콜을 제공하기 때문에, runnable로 구현된 어떤 클래스도 run 메소드를 정의한다</li>
</ul>

<p>정리하면, 쓰레드 클래스는 다른 클라스의 부모가 될 수 없기 때문에, ​어플리케이션 클라스의 메소드를 쓰레드로 실행하려면 runnable로 실행해야 한다</p>

<p>​쓰레드 클라스는 동시 실행 자바 프로그램을 생성한다. 쓰레드 클라스는 컨스트럭트, 메소드 등으로 구성된다</p>

<p>쓰레드 클라스의 메소드는 ​</p>

<ul>
  <li>Run 메소드는 쓰레드의 액션을 서술한다​</li>
  <li>Start 메소드는 run 메소드를 호출하여, 그 쓰레드의 동시 실행을 시작한다</li>
  <li>setPriority 메소드는 쓰레드의 우선순위를 변경하고 ​</li>
  <li>getPriority 메소드는 쓰레드의 현재 우선순위를 반환한다</li>
</ul>

<p>​아래 코드는 run 메소드로 쓰레드의 액션을 서술하고, ​Start 메소드로 그 쓰레드의 동시 실행을 시작하는 것을 보여준다</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">MyThread</span> <span class="kd">extends</span> <span class="nc">Thread</span> <span class="o">{</span><span class="err">​</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span> <span class="o">.</span> <span class="o">.</span> <span class="o">.</span> <span class="o">}</span><span class="err">​</span>
<span class="o">}</span><span class="err">​</span>
<span class="o">.</span> <span class="o">.</span> <span class="o">.</span><span class="err">​</span>
<span class="nc">Thread</span> <span class="n">myTh</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MyThread</span><span class="o">();</span><span class="err">​</span>
<span class="n">myTh</span><span class="o">.</span><span class="na">start</span><span class="o">();</span><span class="err">​</span>
</code></pre></div></div>

<p>Yield 메소드는 동시 실행중인 쓰레드로부터 프로세서의 자발적인 포기를 요구한다
이 쓰레드는 즉시 프로세서를 포기하고 ready 큐로 들어 간다
Sleep 메소드는 쓰레드가 지정된 시간이 지난 후에 block되기를 원한다
이 쓰레드는 ready 큐에 들어간다
Join 메소드는 메소드에게, ​다른 쓰레드의 run 메소드가 종료될 때까지, ​실행을 msec 단위로 지연시킬 것을 강요한다
아래 코드는 join 메소드의 사용 예를 보여준다</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span><span class="err">​</span>
<span class="nc">Thread</span> <span class="n">myTh</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">();</span><span class="err">​</span>
<span class="n">myTh</span><span class="o">.</span><span class="na">start</span><span class="o">();</span><span class="err">​</span>
<span class="c1">// do part of the computation of this thread​</span>
<span class="n">myTh</span><span class="o">.</span><span class="na">join</span><span class="o">();</span> <span class="c1">// Wait for myTh to complete​</span>
<span class="c1">// do the rest of the computation of this thread​</span>
<span class="o">}</span><span class="err">​</span>
</code></pre></div></div>

<p>세마포어 클라스는 카운팅 세마포어를 구현한다<br />
객체는 카운터만 있고, 큐는 없다. 메소드는 acquire 메소드(wait)와 release(release) 메소드가 있다<br />
아래 코드는 이들 메소드의 사용 예를 보여주고 있다. 디파짓과 펫치의 앞뒤에 이들 메소드가 있음을 주의하라<br />
acquire()는 세마포어 -1 한다<br />
release()는 세마포어 +1 한다<br />
여기서 세마포어는 fullspot, emptyspot이다</p>

<p>자바 쓰레드에서 상호배제는 모니터 개념으로 구현한다<br />
이때 메소드는 synchronize로 지정된다<br />
ManageBuf에서 디파짓과 펫치를 synchronize로 정의하여, ​동일한 객체에 대해 실행할 때 서로 방해하는 것을 방지한다<br />
아래 코드는 모니터 개념으로 구현된 ManageBuf에서 메소드가 synchronized로 지정된 예를 보여준다</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">ManageBuf</span> <span class="o">{</span><span class="err">​</span>
  <span class="kd">private</span> <span class="kt">int</span> <span class="o">[</span><span class="mi">100</span><span class="o">]</span> <span class="n">buf</span><span class="o">;</span><span class="err">​</span>
  <span class="o">.</span> <span class="o">.</span> <span class="o">.</span><span class="err">​</span>
  <span class="kd">public</span> <span class="kd">synchronized</span> <span class="kt">void</span> <span class="nf">deposit</span><span class="o">(</span><span class="kt">int</span> <span class="n">item</span><span class="o">)</span> <span class="o">{</span> <span class="o">.</span> <span class="o">.</span> <span class="o">.</span> <span class="o">}</span><span class="err">​</span>
  <span class="kd">public</span> <span class="kd">synchronized</span> <span class="kt">int</span> <span class="nf">fetch</span><span class="o">()</span> <span class="o">{</span> <span class="o">.</span> <span class="o">.</span> <span class="o">.</span> <span class="o">}</span><span class="err">​</span>
  <span class="o">.</span> <span class="o">.</span> <span class="o">.</span><span class="err">​</span>
<span class="o">}</span><span class="err">​</span>
</code></pre></div></div>

<p>모니터는 상호배제를 구현하므로, 프로세스 간의 협력적 동기화를 구현하지 못한다<br />
따라서 프로세스 간의 협력 동기화의 구현을 위해, ​쓰레드 대기 리스트(wait list of threads)와 wait, notify, notifyAll을 구현한다<br />
각각의 객체(P-C 문제에서 producer, consumer가 객체)는 쓰레드 대기 리스트를 가지며, ​대기 리스트에 있는 쓰레드들은 이 객체로부터 자신의 실행에 필요한 ​이벤트를 기다리고 있는 것이다<br />
wait 메소드는 쓰레드를 대기 리스트에 넣고 기다리게 한다<br />
Notify 메소드는 어떤 대기 쓰레드에게 ‘기다리고 있는 이벤트가 발생했음’을 알린다<br />
Notify 메소드가 특정 쓰레드를 깨울 수는 없고, ​JVM이 쓰레드 대기 리스트에서 무작위로 하나를 선택한다<br />
NotifyAll 메소드는 ‘객체에서 발생된 이벤트’를 기다리고 있는 쓰레드를 ​모두 깨워서 task-ready queue에 넣는다<br />
이렇게 하는 이유는 대기 리스트에 있는 쓰레드들이 기다리고 있는 조건이 ​모두 다를 수 있기 때문이다</p>

<blockquote>
  <p>자바 쓰레드: Lock</p>
</blockquote>

<p>자바 쓰레드는 lock을 지원한다<br />
자바 쓰레드에 미리 정의된 ReentrantLock 클라스는 ​Lock 인터페이스를 구현하는 데 사용되며, ​lock 인터페이스는 lock, unlock, tryLock 메소드를 선언한다<br />
lock 메소드는 try 블록을 사용하여 크리티칼 코드(크리티칼 섹션)를 둘러싼다. unlock 메소드의 호출은 finally 절 안에 있어야 하며, lock의 해제를 보장한다</p>

<blockquote>
  <p>Statement-Level Concurrency</p>
</blockquote>

<p>고성능 포트란에서 두 개의 리스트에서 ​서로 대응되는 요소 간의 연산을 병렬 처리하고자 할 때 다음과 같은 문장이 추가된다<br />
PROCESSOR proc(n) -&gt; 배열 처리 문장을 동시 실행(병렬 처리)하기 위해 프로세서 n개를 할당 ​DISTRIBUTE (BLOCK vs. CYCLIC) -&gt; 같은 크기의 블록으로 나누어져 프로세서에 할당, 돌아가면서 하나씩 프로세서에 할당 ​ALIGN array1_elt WITH array2_elt -&gt; 배열1에 배열2를 대응시킴</p>

                </div>
            </section>

            <!-- Email subscribe form at the bottom of the page -->
            <!--
            
                <section class="subscribe-form">
                    <h3 class="subscribe-form-title">Subscribe to LEE</h3>
                    <p>Get the latest posts delivered right to your inbox</p>
                    <span id="searchform" method="post" action="/subscribe/" class="">
    <input class="confirm" type="hidden" name="confirm"  />
    <input class="location" type="hidden" name="location"  />
    <input class="referrer" type="hidden" name="referrer"  />

    <div class="form-group">
        <input class="subscribe-email" onkeyup="myFunc()"
               id="searchtext" type="text" name="searchtext"
               placeholder="Search..." />
    </div>
    <script type="text/javascript">
        function myFunc() {
            if(event.keyCode == 13) {
                var url = encodeURIComponent($("#searchtext").val());
                location.href = "/search.html?query=" + url;
            }
        }
    </script>
</span>
                </section>
            
            -->


            <footer class="post-full-footer">
                <!-- Everything inside the #author tags pulls data from the author -->
                <!-- #author-->
                
                    
                        <section class="author-card">
                            
                                <img class="author-profile-image" src="/assets/built/images/author-logo.jpg" alt="lee989898" />
                            
                            <section class="author-card-content">
                                <h4 class="author-card-name"><a href="/author/lee989898">lee989898</a></h4>
                                
                                    <p><a href="https://github.com/lee989898">깃허브</a></p>
                                
                            </section>
                        </section>
                        <div class="post-full-footer-right">
                            <a class="author-card-button" href="/author/lee989898">Read More</a>
                        </div>
                    
                
                <!-- /author  -->
            </footer>

            <!-- If you use Disqus comments, just uncomment this block.
            The only thing you need to change is "test-apkdzgmqhj" - which
            should be replaced with your own Disqus site-id. -->
            
                <section class="post-full-comments">
                    <div id="disqus_thread"></div>
                    <script>
                        var disqus_config = function () {
                            var this_page_url = 'https://lee989898.github.io/pl-18';
                            var this_page_identifier = '/pl-18';
                            var this_page_title = 'Concurrency';
                        };
                        (function() {
                            var d = document, s = d.createElement('script');
                            s.src = 'https://xxxxxxxx.disqus.com/embed.js';
                            s.setAttribute('data-timestamp', +new Date());
                            (d.head || d.body).appendChild(s);
                        })();
                    </script>
                </section>
            

        </article>

    </div>
</main>

<!-- Links to Previous/Next posts -->
<aside class="read-next outer">
    <div class="inner">
        <div class="read-next-feed">
            
                
                
                
                
                    <article class="read-next-card"
                        
                            style="background-image: url(/assets/built/images/blog-cover1.png)"
                        
                    >
                        <header class="read-next-card-header">
                            <small class="read-next-card-header-sitetitle">&mdash; LEE &mdash;</small>
                            
                                <h3 class="read-next-card-header-title"><a href="/tag/pl/">Pl</a></h3>
                            
                        </header>
                        <div class="read-next-divider"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 14.5s2 3 5 3 5.5-2.463 5.5-5.5S21 6.5 18 6.5c-5 0-7 11-12 11C2.962 17.5.5 15.037.5 12S3 6.5 6 6.5s4.5 3.5 4.5 3.5"/></svg>
</div>
                        <div class="read-next-card-content">
                            <ul>
                                
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/pl-21">FPinPython</a></li>
                                        
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/pl-20">FPLs</a></li>
                                        
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/pl-19">Lambda Calculus​</a></li>
                                        
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                            </ul>
                        </div>
                        <footer class="read-next-card-footer">
                            <a href="/tag/pl/">
                                
                                    See all 20 posts  →
                                
                            </a>
                        </footer>
                    </article>
                
            

            <!-- If there's a next post, display it using the same markup included from - partials/post-card.hbs -->
            
                

    <article class="post-card post-template">
        
            <a class="post-card-image-link" href="/sc-13">
                <div class="post-card-image" style="background-image: url(/assets/built/images/security-logo.png)"></div>
            </a>
        
        <div class="post-card-content">
            <a class="post-card-content-link" href="/sc-13">
                <header class="post-card-header">
                    
                        
                            
                                <span class="post-card-tags">Security</span>
                            
                        
                    

                    <h2 class="post-card-title">Key Management (KDC & CA)</h2>
                </header>
                <section class="post-card-excerpt">
                    
                        <p>Key Management (KDC &amp; CA)

</p>
                    
                </section>
            </a>
            <footer class="post-card-meta">
                
                    
                        
                        <img class="author-profile-image" src="/assets/built/images/author-logo.jpg" alt="lee989898" />
                        
                        <span class="post-card-author">
                            <a href="/author/lee989898/">lee989898</a>
                        </span>
                    
                
                <span class="reading-time">
                    
                    
                      2 min read
                    
                </span>
            </footer>
        </div>
    </article>

            

            <!-- If there's a previous post, display it using the same markup included from - partials/post-card.hbs -->
            
                

    <article class="post-card post-template">
        
            <a class="post-card-image-link" href="/algorithm-06">
                <div class="post-card-image" style="background-image: url(/assets/built/images/algorithm-logo.png)"></div>
            </a>
        
        <div class="post-card-content">
            <a class="post-card-content-link" href="/algorithm-06">
                <header class="post-card-header">
                    
                        
                            
                                <span class="post-card-tags">Algorithm</span>
                            
                        
                    

                    <h2 class="post-card-title">NP-완전</h2>
                </header>
                <section class="post-card-excerpt">
                    
                        <p>NP-완전

</p>
                    
                </section>
            </a>
            <footer class="post-card-meta">
                
                    
                        
                        <img class="author-profile-image" src="/assets/built/images/author-logo.jpg" alt="lee989898" />
                        
                        <span class="post-card-author">
                            <a href="/author/lee989898/">lee989898</a>
                        </span>
                    
                
                <span class="reading-time">
                    
                    
                      3 min read
                    
                </span>
            </footer>
        </div>
    </article>

            

        </div>
    </div>
</aside>

<!-- Floating header which appears on-scroll, included from includes/floating-header.hbs -->
<div class="floating-header">
    <div class="floating-header-logo">
        <a href="https://lee989898.github.io/">
            
            <span>LEE</span>
        </a>
    </div>
    <span class="floating-header-divider">&mdash;</span>
    <div class="floating-header-title">Concurrency</div>
    <div class="floating-header-share">
        <div class="floating-header-share-label">Share this <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
    <path d="M7.5 15.5V4a1.5 1.5 0 1 1 3 0v4.5h2a1 1 0 0 1 1 1h2a1 1 0 0 1 1 1H18a1.5 1.5 0 0 1 1.5 1.5v3.099c0 .929-.13 1.854-.385 2.748L17.5 23.5h-9c-1.5-2-5.417-8.673-5.417-8.673a1.2 1.2 0 0 1 1.76-1.605L7.5 15.5zm6-6v2m-3-3.5v3.5m6-1v2"/>
</svg>
</div>
        <a class="floating-header-share-tw" href="https://twitter.com/share?text=Concurrency&amp;url=https://lee989898.github.io/pl-18"
            onclick="window.open(this.href, 'share-twitter', 'width=550,height=235');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg>

        </a>
        <a class="floating-header-share-fb" href="https://www.facebook.com/sharer/sharer.php?u=https://lee989898.github.io/pl-18"
            onclick="window.open(this.href, 'share-facebook','width=580,height=296');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M19 6h5V0h-5c-3.86 0-7 3.14-7 7v3H8v6h4v16h6V16h5l1-6h-6V7c0-.542.458-1 1-1z"/></svg>

        </a>
    </div>
    <progress class="progress" value="0">
        <div class="progress-container">
            <span class="progress-bar"></span>
        </div>
    </progress>
</div>


<!-- /post -->

<!-- The #contentFor helper here will send everything inside it up to the matching #block helper found in default.hbs -->


        <!-- Previous/next page links - displayed on every page -->
        

        <!-- The footer at the very bottom of the screen -->
        <footer class="site-footer outer">
            <div class="site-footer-content inner">
                <section class="copyright"><a href="https://lee989898.github.io/">LEE</a> &copy; 2022</section>
                <section class="poweredby">Proudly published with <a href="https://jekyllrb.com/">Jekyll</a> &
                    <a href="https://pages.github.com/" target="_blank" rel="noopener">GitHub Pages</a> using
                    <a href="https://github.com/jekyllt/jasper2" target="_blank" rel="noopener">Jasper2</a></section>
                <nav class="site-footer-nav">
                    <a href="/">Latest Posts</a>
                    
                    
                    <a href="https://ghost.org" target="_blank" rel="noopener">Ghost</a>
                </nav>
            </div>
        </footer>

    </div>

    <!-- The big email subscribe modal content -->
    
    <div id="subscribe" class="subscribe-overlay">
        <a class="subscribe-overlay-close" href="#"></a>
        <div class="subscribe-overlay-content">
            
            <h1 class="subscribe-overlay-title">Search LEE</h1>
            <p class="subscribe-overlay-description">
                lunr.js를 이용한 posts 검색 </p>
            <span id="searchform" method="post" action="/subscribe/" class="">
    <input class="confirm" type="hidden" name="confirm"  />
    <input class="location" type="hidden" name="location"  />
    <input class="referrer" type="hidden" name="referrer"  />

    <div class="form-group">
        <input class="subscribe-email" onkeyup="myFunc()"
               id="searchtext" type="text" name="searchtext"
               placeholder="Search..." />
    </div>
    <script type="text/javascript">
        function myFunc() {
            if(event.keyCode == 13) {
                var url = encodeURIComponent($("#searchtext").val());
                location.href = "/search.html?query=" + url;
            }
        }
    </script>
</span>
        </div>
    </div>
    

    <!-- highlight.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.10.0/components/prism-abap.min.js"></script>
    <script>$(document).ready(function() {
      $('pre code').each(function(i, block) {
        hljs.highlightBlock(block);
      });
    });</script>

    <!-- jQuery + Fitvids, which makes all video embeds responsive -->
    <script
        src="https://code.jquery.com/jquery-3.2.1.min.js"
        integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
        crossorigin="anonymous">
    </script>
    <script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="https://demo.ghost.io/assets/js/jquery.fitvids.js?v=724281a32e"></script>


    <!-- Paginator increased to "infinit" in _config.yml -->
    <!-- if paginator.posts  -->
    <!-- <script>
        var maxPages = parseInt('');
    </script>
    <script src="/assets/js/infinitescroll.js"></script> -->
    <!-- /endif -->

    


    <!-- Add Google Analytics  -->
    <!-- Google Analytics Tracking code -->
 <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-xxxxxxxx-x', 'auto');
  ga('send', 'pageview');

 </script>


    <!-- The #block helper will pull in data from the #contentFor other template files. In this case, there's some JavaScript which we only want to use in post.hbs, but it needs to be included down here, after jQuery has already loaded. -->
    
        <script>

// NOTE: Scroll performance is poor in Safari
// - this appears to be due to the events firing much more slowly in Safari.
//   Dropping the scroll event and using only a raf loop results in smoother
//   scrolling but continuous processing even when not scrolling
$(document).ready(function () {
    // Start fitVids
    var $postContent = $(".post-full-content");
    $postContent.fitVids();
    // End fitVids

    var progressBar = document.querySelector('progress');
    var header = document.querySelector('.floating-header');
    var title = document.querySelector('.post-full-title');

    var lastScrollY = window.scrollY;
    var lastWindowHeight = window.innerHeight;
    var lastDocumentHeight = $(document).height();
    var ticking = false;

    function onScroll() {
        lastScrollY = window.scrollY;
        requestTick();
    }

    function onResize() {
        lastWindowHeight = window.innerHeight;
        lastDocumentHeight = $(document).height();
        requestTick();
    }

    function requestTick() {
        if (!ticking) {
            requestAnimationFrame(update);
        }
        ticking = true;
    }

    function update() {
        var trigger = title.getBoundingClientRect().top + window.scrollY;
        var triggerOffset = title.offsetHeight + 35;
        var progressMax = lastDocumentHeight - lastWindowHeight;

        // show/hide floating header
        if (lastScrollY >= trigger + triggerOffset) {
            header.classList.add('floating-active');
        } else {
            header.classList.remove('floating-active');
        }

        progressBar.setAttribute('max', progressMax);
        progressBar.setAttribute('value', lastScrollY);

        ticking = false;
    }

    window.addEventListener('scroll', onScroll, {passive: true});
    window.addEventListener('resize', onResize, false);

    update();
});
</script>

    

    <!-- Ghost outputs important scripts and data with this tag - it should always be the very last thing before the closing body tag -->
    <!-- ghost_foot -->

</body>
</html>
