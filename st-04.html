<!DOCTYPE html>
<html>
<head>

    <!-- Document Settings -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <!-- Base Meta -->
    <!-- dynamically fixing the title for tag/author pages -->



    <title>File 조작</title>
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Styles'n'Scripts -->
    <link rel="stylesheet" type="text/css" href="/assets/built/screen.css" />
    <link rel="stylesheet" type="text/css" href="/assets/built/screen.edited.css" />
    <link rel="stylesheet" type="text/css" href="/assets/built/syntax.css" />
    <!-- highlight.js -->

    <!-- custom.css -->
    <link rel="stylesheet" type="text/css" href="/assets/built/custom.css" />

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

    <!-- 웹 폰트 -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/earlyaccess/nanumgothic.css">

    <!-- syntax.css -->
    <link rel="stylesheet" type="text/css" href="/assets/built/syntax.css" />

    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css">
    <style>.hljs { background: none; }</style>

    <!--[if IE]>
        <style>
            p, ol, ul{
                width: 100%;
            }
            blockquote{
                width: 100%;
            }
        </style>
    <![endif]-->
    
    <!-- This tag outputs SEO meta+structured data and other important settings -->
    <meta name="description" content="공부 블로그" />
    <link rel="shortcut icon" href="https://lee989898.github.io/assets/built/images/favicon.jpg" type="image/png" />
    <link rel="canonical" href="https://lee989898.github.io/st-04" />
    <meta name="referrer" content="no-referrer-when-downgrade" />

    


     <!--title below is coming from _includes/dynamic_title-->
    <meta property="og:site_name" content="LEE" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="File 조작" />
    <meta property="og:description" content="File 조작 File system structure ​ i-node 인덱스 노드의 준말 파일의 메타 데이터 저장되어있는 영역 하드디스크에 저장되어 있다 실제 내용 file type​ access permission bits​ file size​ pointers to data blocks for the file Stat 구조체의 field들은 i-node에서 읽어온다 directory block directory block에는 파일 목록이 있다​ 파일 이름 파일의 i-노드" />
    <meta property="og:url" content="https://lee989898.github.io/st-04" />
    <meta property="og:image" content="https://lee989898.github.io/assets/built/images/system-logo.png" />
    <meta property="article:publisher" content="https://www.facebook.com/" />
    <meta property="article:author" content="https://www.facebook.com/" />
    <meta property="article:published_time" content="2021-09-24T01:06:00+09:00" />
    <meta property="article:modified_time" content="2021-09-24T01:06:00+09:00" />
    <meta property="article:tag" content="System" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="File 조작" />
    <meta name="twitter:description" content="File 조작 File system structure ​ i-node 인덱스 노드의 준말 파일의 메타 데이터 저장되어있는 영역 하드디스크에 저장되어 있다 실제 내용 file type​ access permission bits​ file size​ pointers to data blocks for the file Stat 구조체의 field들은 i-node에서 읽어온다 directory block directory block에는 파일 목록이 있다​ 파일 이름 파일의 i-노드" />
    <meta name="twitter:url" content="https://lee989898.github.io/" />
    <meta name="twitter:image" content="https://lee989898.github.io/assets/built/images/system-logo.png" />
    <meta name="twitter:label1" content="Written by" />
    <meta name="twitter:data1" content="LEE" />
    <meta name="twitter:label2" content="Filed under" />
    <meta name="twitter:data2" content="System" />
    <meta name="twitter:site" content="@" />
    <meta name="twitter:creator" content="@" />
    <meta property="og:image:width" content="1400" />
    <meta property="og:image:height" content="933" />

    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Website",
    "publisher": {
        "@type": "Organization",
        "name": "LEE",
        "logo": "https://lee989898.github.io/"
    },
    "url": "https://lee989898.github.io/st-04",
    "image": {
        "@type": "ImageObject",
        "url": "https://lee989898.github.io/assets/built/images/system-logo.png",
        "width": 2000,
        "height": 666
    },
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://lee989898.github.io/st-04"
    },
    "description": "File 조작 File system structure ​ i-node 인덱스 노드의 준말 파일의 메타 데이터 저장되어있는 영역 하드디스크에 저장되어 있다 실제 내용 file type​ access permission bits​ file size​ pointers to data blocks for the file Stat 구조체의 field들은 i-node에서 읽어온다 directory block directory block에는 파일 목록이 있다​ 파일 이름 파일의 i-노드"
}
    </script>

    <!-- <script type="text/javascript" src="https://demo.ghost.io/public/ghost-sdk.min.js?v=724281a32e"></script>
    <script type="text/javascript">
    ghost.init({
    	clientId: "ghost-frontend",
    	clientSecret: "f84a07a72b17"
    });
    </script> -->

    <meta name="generator" content="Jekyll 3.6.2" />
    <link rel="alternate" type="application/rss+xml" title="File 조작" href="/feed.xml" />


</head>
<body class="post-template">

    <div class="site-wrapper">
        <!-- All the main content gets inserted here, index.hbs, post.hbs, etc -->
        <!-- default -->

<!-- The tag above means: insert everything in this file
into the {body} of the default.hbs template -->

<header class="site-header outer">
    <div class="inner">
        <nav class="site-nav">
    <div class="site-nav-left">
        
            
                <a class="site-nav-logo" href="https://lee989898.github.io/">LEE</a>
            
        
        
            
<ul class="nav" role="menu">
    <li class="nav-home" role="menuitem"><a href="/">Home</a></li>
    <li class="nav-about" role="menuitem"><a href="/about/">About</a></li>
    <li class="nav-android" role="menuitem"><a href="/tag/android/">안드로이드</a></li>
    <li class="nav-kotlin" role="menuitem"><a href="/tag/kotlin/">코틀린</a></li>
    <li class="nav-python" role="menuitem"><a href="/tag/python/">파이썬</a></li>
    <li class="nav-algorithm" role="menuitem"><a href="/tag/algorithm/">알고리즘</a></li>
    <li class="nav-pl" role="menuitem"><a href="/tag/pl/">프로그래밍언어</a></li>
    <li class="nav-security" role="menuitem"><a href="/tag/security/">컴퓨터보안</a></li>
    <li class="nav-system" role="menuitem"><a href="/tag/system/">시스템프로그래밍</a></li>
    <li class="nav-archive" role="menuitem">
        <a href="/archive.html">All Posts</a>
    </li>
    <li class="nav-archive" role="menuitem">
        <a href="/author_archive.html">Tag별 Posts</a>
    </li>


</ul>



        
    </div>
    <div class="site-nav-right">
        <div class="social-links">
            
            
        </div>
        
            <a class="subscribe-button" href="#subscribe">Search</a>
        
    </div>
</nav>

    </div>
</header>

<!-- Everything inside the #post tags pulls data from the post -->
<!-- #post -->

<main id="site-main" class="site-main outer" role="main">
    <div class="inner">

        <article class="post-full  tag-system post tag-system ">

            <header class="post-full-header">
                <section class="post-full-meta">
                    <time class="post-full-meta-date" datetime="24 September 2021">24 September 2021</time>
                    
                        <span class="date-divider">/</span>
                        
                            
                               <a href='/tag/system/'>SYSTEM</a>
                            
                        
                    
                </section>
                <h1 class="post-full-title">File 조작</h1>
            </header>

            <!--
            
            <figure class="post-full-image" style="background-image: url(/assets/built/images/system-logo.png)">
            </figure>
            
            -->
            <section class="post-full-content">
                <div class="kg-card-markdown">
                    <h3 id="file-조작"><strong>File 조작</strong></h3>

<hr />

<blockquote>
  <p>File system structure ​</p>
</blockquote>

<hr />

<p><img src="/assets/built/images/st/st08.png" width="50%" height="25%" title="제목" alt="시스템프로그래밍" /></p>

<hr />

<ul>
  <li>i-node
    <ul>
      <li>인덱스 노드의 준말</li>
      <li>파일의 메타 데이터 저장되어있는 영역</li>
      <li>하드디스크에 저장되어 있다</li>
      <li>실제 내용
        <ul>
          <li>file type​</li>
          <li>access permission bits​</li>
          <li>file size​</li>
          <li>pointers to data blocks for the file</li>
        </ul>
      </li>
      <li>Stat 구조체의 field들은 i-node에서 읽어온다</li>
    </ul>
  </li>
</ul>

<p><img src="/assets/built/images/st/st09.png" width="50%" height="25%" title="제목" alt="시스템프로그래밍" /></p>

<hr />

<ul>
  <li>directory block
    <ul>
      <li>directory block에는 파일 목록이 있다​
        <ul>
          <li>파일 이름</li>
          <li>파일의 i-노드 번호​</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>hard link​
    <ul>
      <li>디렉토리 블록에서 i-node로 링크</li>
      <li>i-노드 번호를 사용하여 링크 만들기​</li>
      <li>Hard link는 같은 file system 내부에서만 연결 가능​</li>
    </ul>
  </li>
  <li>i-노드의 링크 수
    <ul>
      <li>i-노드를 가리키는 디렉토리 항목 수</li>
      <li>Stat 구조체의 st_link</li>
    </ul>
  </li>
</ul>

<p><img src="/assets/built/images/st/st10.png" width="50%" height="25%" title="제목" alt="시스템프로그래밍" /></p>

<ul>
  <li>Directory file의 data block 내용으로는  (i-node no, file name) entry 들이 기록된다.</li>
</ul>

<hr />

<ul>
  <li>Symbolic link​
    <ul>
      <li>Linux 명령 ‘% ln –s /usr/lib lib’​</li>
      <li>ex) lrwxrwxrwx 1 root   7   Sep 25  07:14   lib -&gt; /usr/lib​
        <ul>
          <li>파일 이름: lib​</li>
          <li>파일 내용: /usr/lib​</li>
          <li>파일 크기: 7 bytes​</li>
        </ul>
      </li>
      <li>파일(데이터 블록)의 내용은 대상 링크의 경로 이름이다.</li>
    </ul>
  </li>
</ul>

<hr />

<ul>
  <li>파일 삭제
    <ul>
      <li>디렉토리 블록에서 파일이 삭제되면 i-node의 링크 수가 감소한다</li>
      <li>링크 수가 0이 되면 파일의 i-node와 데이터 블록이 모두 삭제된다</li>
    </ul>
  </li>
  <li>파일 이동
    <ul>
      <li>리눅스 명령어: mv​</li>
      <li>파일의 i-node 및 데이터 블록을 변경하지 않고 디렉토리 항목 변경</li>
    </ul>
  </li>
</ul>

<hr />

<blockquote>
  <p>link() / unlink()</p>
</blockquote>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#include &lt;unistd.h&gt;

int link(const char * cur_path, const cbar * new_path)
</code></pre></div></div>

<ul>
  <li>이 호출은 기존 파일(cur_path)에 대한 새 링크/디렉토리 항목(new_path)을 만든다
    <ul>
      <li>같은 i-node를 가리키는 directory entry가 하나 더 만들어짐​</li>
      <li>해당 i-node의 link count가 하나 증가​</li>
    </ul>
  </li>
  <li>반환 값
    <ul>
      <li>성공: 0, 링크 수 증가</li>
      <li>오류: -1</li>
    </ul>
  </li>
  <li>매개변수
    <ul>
      <li>cur_path: 현재 하드 링크(또는 pathname)</li>
      <li>new_path: 새로운 하드 링크(또는 pathname)</li>
    </ul>
  </li>
  <li>보통 link count가 0이 되면 해당 파일은 삭제됨​</li>
  <li>다른 프로세스가 사용중인 파일이 삭제되는 것을 방지하기 위해 link count가 0에 도달했더라도 그 파일을 open 한 프로세스의 수가 0 이상이면 삭제하지 않는다​</li>
  <li>파일이 close 될 때 kernel은 그 파일을 open 한 프로세스 수가 0 인지 확인하고, 0 일 경우 link count가 0 인지 확인하고 삭제한다</li>
</ul>

<hr />

<blockquote>
  <p>remove()</p>
</blockquote>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#include &lt;unistd.h&gt;

int remove(const char *pathname);
</code></pre></div></div>

<ul>
  <li>remove()는 파일의 링크 수를 줄이기 때문에 unlink()와 유사하다</li>
  <li>반환 값
    <ul>
      <li>성공 : 0</li>
      <li>오류: -1</li>
    </ul>
  </li>
  <li>매개변수
    <ul>
      <li>Pathname: 디렉토리 파일의 경로명이 있는 문자열</li>
      <li>pathname이 파일이면 remove() = unlink()</li>
      <li>pathname이 디렉토리이면 remove() = rmdir()</li>
    </ul>
  </li>
</ul>

<hr />

<blockquote>
  <p>rename()</p>
</blockquote>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#include &lt;stdio.h&gt;

int rename(const char *oldname, const char *newname);
</code></pre></div></div>

<ul>
  <li>파일 또는 디렉토리 이름 지정</li>
  <li>반환 값
    <ul>
      <li>성공: 0</li>
      <li>오류: -1</li>
    </ul>
  </li>
  <li>매개변수
    <ul>
      <li>oldname: 현재 하드 링크</li>
      <li>newname: 새로운 하드 링크</li>
    </ul>
  </li>
</ul>

<hr />

<blockquote>
  <p>umask()​</p>
</blockquote>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#include &lt;sys/types.h&gt;
#include &lt;sys/stat.h&gt;

mode_t umask(mode_t newmask);
</code></pre></div></div>

<ul>
  <li>새 파일의 mask 값 설정</li>
  <li>umask()는 이전 마스크 값을 반환한다</li>
  <li>매개변수
    <ul>
      <li>newmask: bitwise OR
        <ul>
          <li>S_IRUSR, S_IWUSR, S_IXUSR</li>
          <li>S_IRGRP, S_IWGRP, S_IXGRP</li>
          <li>S_IROTH, S_IWOTH, S_IXOTH</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>umask : 파일 모드 작성 mask (8진수로 표시)​
    <ul>
      <li>(예) root user의 umask 값 : 0022​</li>
      <li>일반 user의 mask 값 : 0002​</li>
      <li>umask –S 커맨드를 사용하면 symbolic 값을 볼 수 있음​</li>
    </ul>
  </li>
  <li>파일의 실제 허가(protection) mode​
    <ul>
      <li>현재의 umask값에 NOT 연산을 수행한 값과 파일이 생성될 때의 모드 값을 AND (논리 연산)시킨 값 : AND(mode, NOT(umask))​</li>
    </ul>
  </li>
</ul>

<hr />

<blockquote>
  <p>chmod() / fchmod()​</p>
</blockquote>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#include &lt;sys/types.h&gt;
#include &lt;sys/stat.h&gt;
#include &lt;unistd.h&gt;

int chmod(const char *pathname, mode_t mode);
int fchmod(int fd, mode_t mode);
</code></pre></div></div>

<ul>
  <li>이 호출은 파일의 액세스 권한을 변경하는 데 사용된다.
    <ul>
      <li>Stat 구조체의 st_mode 변경</li>
    </ul>
  </li>
  <li>반환 값
    <ul>
      <li>성공 : 0</li>
      <li>오류: -1, 변수를 설정합니다.</li>
    </ul>
  </li>
  <li>매개변수
    <ul>
      <li>pathname: pathname이 있는 문자열</li>
      <li>fd: 파일 디스크립터</li>
      <li>mode: 파일 보호 모드</li>
    </ul>
  </li>
</ul>

<hr />

<blockquote>
  <p>truncate() / ftruncate()​</p>
</blockquote>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#include &lt;sys/types.h&gt;
#include &lt;unistd.h&gt;

int truncate(const char *pathname, size_t length);
int ftruncate(int fd, size_t length);
</code></pre></div></div>

<ul>
  <li>이러한 호출은 파일 디스크립터 또는 pathname에서 참조하는 파일을 길이로 지정된 길이로 자른다.</li>
  <li>반환 값
    <ul>
      <li>성공: 0</li>
      <li>오류: -1, 변수 설정</li>
    </ul>
  </li>
  <li>매개변수
    <ul>
      <li>pathname: pathname이 있는 문자열</li>
      <li>fd: 파일 디스크립터</li>
      <li>길이: 크기</li>
    </ul>
  </li>
</ul>

<hr />

<blockquote>
  <p>utime()​</p>
</blockquote>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#include &lt;sys/types.h&gt;​
#include &lt;unistd.h&gt;​
#include &lt;utime.h&gt;​

int utime(const char *pathname, struct utimebuf *times);
</code></pre></div></div>

<ul>
  <li>utime()은 타임스탬프를 수정한다</li>
  <li>반환 값
    <ul>
      <li>성공: 0</li>
      <li>오류: -1 및 변수 ‘errno’ 설정</li>
    </ul>
  </li>
  <li>매개변수
    <ul>
      <li>pathname: 파일의 경로명</li>
      <li>시간: 마지막 액세스 시간 및 수정 시간</li>
    </ul>

    <p>struct utimebuf​{​
  time_t    actime;        /* access time <em>/​
  time_t    modtime;       /</em> modify time */​
  };</p>
  </li>
  <li>각 필드는 1970-1-1 00:00 부터 현재까지의 경과 시간을 초로 환산한 값​</li>
</ul>

<hr />

<blockquote>
  <p>Directory​</p>
</blockquote>

<ul>
  <li>디렉토리는 일종의 파일이다
    <ul>
      <li>디렉토리에는 소유자, 그룹 및 권한도 있다.</li>
      <li>디렉토리에 대해 open, read, fstat, close를 사용할 수 있다</li>
      <li>차이 creat() 및 open()을 사용하여 디렉토리를 생성할 수 없음 -&gt; 그렇게 하려면 mkdir() 필요</li>
    </ul>
  </li>
  <li>
    <p>각 디렉토리 항목에는 i-노드 번호와 파일 이름이 있다.</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#include &lt;dirent.h&gt; ​

struct dirent {​
ino_t d_ino;          /* i-node number */​
char  d_name[ ];  /* filename */​
}
</code></pre></div>    </div>
  </li>
</ul>

<hr />

<blockquote>
  <p>mkdir()</p>
</blockquote>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#include &lt;sys/stat.h&gt;
#include &lt;unistd.h&gt;

int mkdir(const char *pathname, mode_t mode);
</code></pre></div></div>

<ul>
  <li>mkdir()은 디렉토리를 만드는 데 사용된다</li>
  <li>매개변수
    <ul>
      <li>pathname: 새 디렉토리의 경로명</li>
      <li>mode: 디렉토리 권한</li>
    </ul>
  </li>
  <li>반환 값
    <ul>
      <li>성공: 0</li>
      <li>오류: -1</li>
    </ul>
  </li>
  <li>. 과 .. 을 새로 생성된 디렉토리에 넣는다</li>
</ul>

<hr />

<blockquote>
  <p>opendir() / readdir() / closedir() / rewinddir()</p>
</blockquote>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#include &lt;sys/types.h&gt;​
#include &lt;dirent.h&gt;​
typedef struct dirent Dirent;​

DIR *opendir(const char *pathname);​

dirent *readdir(DIR *dir_fd);​

int closedir(DIR *dir_fd);​

void rewinddir (DIR *dir_fd); 
</code></pre></div></div>

<ul>
  <li>DIR 구조체​
    <ul>
      <li>open된 디렉토리를 다루는데 사용되는 구조체​</li>
    </ul>
  </li>
  <li>opendir() 함수는 open()과 유사하다</li>
  <li>opendir()은 디렉토리 파일을 읽기 전용으로 연다</li>
  <li>opendir()은 열린 디렉토리의 파일 포인터를 반환한다</li>
  <li>closedir()은 dir_fd가 가리키는 디렉토리 파일을 닫는다</li>
  <li>readdir()
    <ul>
      <li>첫 번째 호출이 성공하면 디렉토리의 첫 번째 항목을 struct dirent에서 읽는다</li>
      <li>그런 다음 자동으로 디렉토리 포인터가 다음 항목으로 이동한다</li>
    </ul>
  </li>
  <li>rewinddir()은 디렉토리 포인터를 디렉토리의 첫 번째 항목으로 이동한다</li>
</ul>

<hr />

<blockquote>
  <p>rmdir()</p>
</blockquote>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#include &lt;unistd.h&gt;​

int rmdir(const char *pathname);
</code></pre></div></div>

<ul>
  <li>디렉토리 파일 제거</li>
  <li>성공하려면 디렉토리가 비어 있어야 합니다</li>
  <li>반환 값
    <ul>
      <li>성공: 0</li>
      <li>오류: -1</li>
    </ul>
  </li>
  <li>매개변수
    <ul>
      <li>경로명: 디렉토리의 경로명</li>
    </ul>
  </li>
</ul>

<hr />

<blockquote>
  <p>chdir()</p>
</blockquote>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#include &lt;unistd.h&gt;​​

int chdir(const char *pathname);
</code></pre></div></div>

<ul>
  <li>디렉토리 변경</li>
  <li>반환 값
    <ul>
      <li>성공: 0</li>
      <li>오류: -1</li>
    </ul>
  </li>
  <li>매개변수
    <ul>
      <li>pathname: 디렉토리의 전체 또는 상대 경로 이름이 있는 문자열</li>
    </ul>
  </li>
</ul>

<hr />

<blockquote>
  <p>getcwd()​</p>
</blockquote>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#include &lt;unistd.h&gt;​

char *getcwd(char *buf, size_t size);​
</code></pre></div></div>

<ul>
  <li>현재 작업 디렉토리의 경로 이름을 가져온다</li>
  <li>매개변수
    <ul>
      <li>buf: 현재 디렉토리의 경로명을 저장할 버퍼</li>
      <li>크기: buf의 크기</li>
    </ul>
  </li>
</ul>

<hr />

<blockquote>
  <p>Symbolic link​</p>
</blockquote>

<ul>
  <li>하드 링크의 한계
    <ul>
      <li>디렉토리에 대한 링크를 생성할 수 없다
        <ul>
          <li>루트유저만 가능성</li>
        </ul>
      </li>
      <li>다른 파일 시스템에 있는 파일에 대한 링크를 생성할 수 없다</li>
    </ul>
  </li>
  <li>하드링크의 한계 해결</li>
  <li>파일에 대한 간접 포인터
    <ul>
      <li>실제 파일에 대한 경로를 저장하고 있다</li>
    </ul>
  </li>
  <li>파일을 다루는 함수를 사용할 때 심볼릭 링크를 자체를 다루는지 아니면 링크된 대상 파일을 다루는지​</li>
  <li>심볼릭 링크 자체를 다루는 함수​
    <ul>
      <li>lchown, lstat, readlink, remove, rename, unlink 등​</li>
    </ul>
  </li>
  <li>링크된 대상 파일을 다루는 함수​
    <ul>
      <li>access, chdir, chmod, chown, creat, exec, link, mkdir, mkfifo, open, opendir, pathconf, stat, truncate 등​</li>
    </ul>
  </li>
  <li>
    <p>symlink()</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  #include &lt;unistd.h&gt;​

  int symlink(const char *realname, const char *symname);
</code></pre></div>    </div>
  </li>
  <li>반환 값
    <ul>
      <li>성공 : 0</li>
      <li>오류: -1</li>
    </ul>
  </li>
  <li>매개변수
    <ul>
      <li>realname : 현재 파일의 경로명</li>
      <li>symname : 심볼릭 링크의 경로명</li>
    </ul>
  </li>
  <li>
    <p>readlink()</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  #include &lt;unistd.h&gt;​

  int readlink(const char *pathname, char *buf, int bufsize);​
</code></pre></div>    </div>
  </li>
  <li>심볼릭 링크 파일의 내용을 읽는 함수​
    <ul>
      <li>symlink() 에서 저장된 actualpath 가 buf에 채워진다​</li>
      <li>null 문자는 채워지지 않는다​</li>
    </ul>
  </li>
  <li>Return values​
    <ul>
      <li>Success : length of string read​</li>
      <li>Error : -1​</li>
    </ul>
  </li>
  <li>심볼릭 링크를 open 으로 열면 링크된 대상 파일이 열린다​</li>
</ul>

<hr />

<blockquote>
  <p>sync() / fsync()​</p>
</blockquote>

<ul>
  <li>버퍼에 있는 내용을 디스크에 쓰도록 한다</li>
  <li>sync()는 시스템 데몬 프로세스에 의해서 30초마다 호출된다
    <ul>
      <li>I/O 작업이 끝나기 전에 리턴한다​</li>
    </ul>
  </li>
  <li>fsync()는 지정된 파일에 대해서만 I/O 작업을 수행하도록 한다
    <ul>
      <li>I/O 작업이 끝난 후 리턴한다​</li>
    </ul>
  </li>
</ul>

<hr />

                </div>
            </section>

            <!-- Email subscribe form at the bottom of the page -->
            <!--
            
                <section class="subscribe-form">
                    <h3 class="subscribe-form-title">Subscribe to LEE</h3>
                    <p>Get the latest posts delivered right to your inbox</p>
                    <span id="searchform" method="post" action="/subscribe/" class="">
    <input class="confirm" type="hidden" name="confirm"  />
    <input class="location" type="hidden" name="location"  />
    <input class="referrer" type="hidden" name="referrer"  />

    <div class="form-group">
        <input class="subscribe-email" onkeyup="myFunc()"
               id="searchtext" type="text" name="searchtext"
               placeholder="Search..." />
    </div>
    <script type="text/javascript">
        function myFunc() {
            if(event.keyCode == 13) {
                var url = encodeURIComponent($("#searchtext").val());
                location.href = "/search.html?query=" + url;
            }
        }
    </script>
</span>
                </section>
            
            -->


            <footer class="post-full-footer">
                <!-- Everything inside the #author tags pulls data from the author -->
                <!-- #author-->
                
                    
                        <section class="author-card">
                            
                                <img class="author-profile-image" src="/assets/built/images/author-logo.jpg" alt="lee989898" />
                            
                            <section class="author-card-content">
                                <h4 class="author-card-name"><a href="/author/lee989898">lee989898</a></h4>
                                
                                    <p><a href="https://github.com/lee989898">깃허브</a></p>
                                
                            </section>
                        </section>
                        <div class="post-full-footer-right">
                            <a class="author-card-button" href="/author/lee989898">Read More</a>
                        </div>
                    
                
                <!-- /author  -->
            </footer>

            <!-- If you use Disqus comments, just uncomment this block.
            The only thing you need to change is "test-apkdzgmqhj" - which
            should be replaced with your own Disqus site-id. -->
            
                <section class="post-full-comments">
                    <div id="disqus_thread"></div>
                    <script>
                        var disqus_config = function () {
                            var this_page_url = 'https://lee989898.github.io/st-04';
                            var this_page_identifier = '/st-04';
                            var this_page_title = 'File 조작';
                        };
                        (function() {
                            var d = document, s = d.createElement('script');
                            s.src = 'https://xxxxxxxx.disqus.com/embed.js';
                            s.setAttribute('data-timestamp', +new Date());
                            (d.head || d.body).appendChild(s);
                        })();
                    </script>
                </section>
            

        </article>

    </div>
</main>

<!-- Links to Previous/Next posts -->
<aside class="read-next outer">
    <div class="inner">
        <div class="read-next-feed">
            
                
                
                
                
                    <article class="read-next-card"
                        
                            style="background-image: url(/assets/built/images/blog-cover1.png)"
                        
                    >
                        <header class="read-next-card-header">
                            <small class="read-next-card-header-sitetitle">&mdash; LEE &mdash;</small>
                            
                                <h3 class="read-next-card-header-title"><a href="/tag/system/">System</a></h3>
                            
                        </header>
                        <div class="read-next-divider"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 14.5s2 3 5 3 5.5-2.463 5.5-5.5S21 6.5 18 6.5c-5 0-7 11-12 11C2.962 17.5.5 15.037.5 12S3 6.5 6 6.5s4.5 3.5 4.5 3.5"/></svg>
</div>
                        <div class="read-next-card-content">
                            <ul>
                                
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/st-09">프로세스통신-socket</a></li>
                                        
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/st-08">프로세스통신-pipe</a></li>
                                        
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/st-07">Signal</a></li>
                                        
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                            </ul>
                        </div>
                        <footer class="read-next-card-footer">
                            <a href="/tag/system/">
                                
                                    See all 8 posts  →
                                
                            </a>
                        </footer>
                    </article>
                
            

            <!-- If there's a next post, display it using the same markup included from - partials/post-card.hbs -->
            
                

    <article class="post-card post-template">
        
            <a class="post-card-image-link" href="/sc-06">
                <div class="post-card-image" style="background-image: url(/assets/built/images/security-logo.png)"></div>
            </a>
        
        <div class="post-card-content">
            <a class="post-card-content-link" href="/sc-06">
                <header class="post-card-header">
                    
                        
                            
                                <span class="post-card-tags">Security</span>
                            
                        
                    

                    <h2 class="post-card-title">RSA</h2>
                </header>
                <section class="post-card-excerpt">
                    
                        <p>RSA

</p>
                    
                </section>
            </a>
            <footer class="post-card-meta">
                
                    
                        
                        <img class="author-profile-image" src="/assets/built/images/author-logo.jpg" alt="lee989898" />
                        
                        <span class="post-card-author">
                            <a href="/author/lee989898/">lee989898</a>
                        </span>
                    
                
                <span class="reading-time">
                    
                    
                      1 min read
                    
                </span>
            </footer>
        </div>
    </article>

            

            <!-- If there's a previous post, display it using the same markup included from - partials/post-card.hbs -->
            
                

    <article class="post-card post-template">
        
            <a class="post-card-image-link" href="/pl-10">
                <div class="post-card-image" style="background-image: url(/assets/built/images/pl-background-frontend.png)"></div>
            </a>
        
        <div class="post-card-content">
            <a class="post-card-content-link" href="/pl-10">
                <header class="post-card-header">
                    
                        
                            
                                <span class="post-card-tags">Pl</span>
                            
                        
                    

                    <h2 class="post-card-title">신택스 분석방법</h2>
                </header>
                <section class="post-card-excerpt">
                    
                        <p>신택스 분석 방법

</p>
                    
                </section>
            </a>
            <footer class="post-card-meta">
                
                    
                        
                        <img class="author-profile-image" src="/assets/built/images/author-logo.jpg" alt="lee989898" />
                        
                        <span class="post-card-author">
                            <a href="/author/lee989898/">lee989898</a>
                        </span>
                    
                
                <span class="reading-time">
                    
                    
                      9 min read
                    
                </span>
            </footer>
        </div>
    </article>

            

        </div>
    </div>
</aside>

<!-- Floating header which appears on-scroll, included from includes/floating-header.hbs -->
<div class="floating-header">
    <div class="floating-header-logo">
        <a href="https://lee989898.github.io/">
            
            <span>LEE</span>
        </a>
    </div>
    <span class="floating-header-divider">&mdash;</span>
    <div class="floating-header-title">File 조작</div>
    <div class="floating-header-share">
        <div class="floating-header-share-label">Share this <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
    <path d="M7.5 15.5V4a1.5 1.5 0 1 1 3 0v4.5h2a1 1 0 0 1 1 1h2a1 1 0 0 1 1 1H18a1.5 1.5 0 0 1 1.5 1.5v3.099c0 .929-.13 1.854-.385 2.748L17.5 23.5h-9c-1.5-2-5.417-8.673-5.417-8.673a1.2 1.2 0 0 1 1.76-1.605L7.5 15.5zm6-6v2m-3-3.5v3.5m6-1v2"/>
</svg>
</div>
        <a class="floating-header-share-tw" href="https://twitter.com/share?text=File+%EC%A1%B0%EC%9E%91&amp;url=https://lee989898.github.io/st-04"
            onclick="window.open(this.href, 'share-twitter', 'width=550,height=235');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg>

        </a>
        <a class="floating-header-share-fb" href="https://www.facebook.com/sharer/sharer.php?u=https://lee989898.github.io/st-04"
            onclick="window.open(this.href, 'share-facebook','width=580,height=296');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M19 6h5V0h-5c-3.86 0-7 3.14-7 7v3H8v6h4v16h6V16h5l1-6h-6V7c0-.542.458-1 1-1z"/></svg>

        </a>
    </div>
    <progress class="progress" value="0">
        <div class="progress-container">
            <span class="progress-bar"></span>
        </div>
    </progress>
</div>


<!-- /post -->

<!-- The #contentFor helper here will send everything inside it up to the matching #block helper found in default.hbs -->


        <!-- Previous/next page links - displayed on every page -->
        

        <!-- The footer at the very bottom of the screen -->
        <footer class="site-footer outer">
            <div class="site-footer-content inner">
                <section class="copyright"><a href="https://lee989898.github.io/">LEE</a> &copy; 2021</section>
                <section class="poweredby">Proudly published with <a href="https://jekyllrb.com/">Jekyll</a> &
                    <a href="https://pages.github.com/" target="_blank" rel="noopener">GitHub Pages</a> using
                    <a href="https://github.com/jekyllt/jasper2" target="_blank" rel="noopener">Jasper2</a></section>
                <nav class="site-footer-nav">
                    <a href="/">Latest Posts</a>
                    
                    
                    <a href="https://ghost.org" target="_blank" rel="noopener">Ghost</a>
                </nav>
            </div>
        </footer>

    </div>

    <!-- The big email subscribe modal content -->
    
    <div id="subscribe" class="subscribe-overlay">
        <a class="subscribe-overlay-close" href="#"></a>
        <div class="subscribe-overlay-content">
            
            <h1 class="subscribe-overlay-title">Search LEE</h1>
            <p class="subscribe-overlay-description">
                lunr.js를 이용한 posts 검색 </p>
            <span id="searchform" method="post" action="/subscribe/" class="">
    <input class="confirm" type="hidden" name="confirm"  />
    <input class="location" type="hidden" name="location"  />
    <input class="referrer" type="hidden" name="referrer"  />

    <div class="form-group">
        <input class="subscribe-email" onkeyup="myFunc()"
               id="searchtext" type="text" name="searchtext"
               placeholder="Search..." />
    </div>
    <script type="text/javascript">
        function myFunc() {
            if(event.keyCode == 13) {
                var url = encodeURIComponent($("#searchtext").val());
                location.href = "/search.html?query=" + url;
            }
        }
    </script>
</span>
        </div>
    </div>
    

    <!-- highlight.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.10.0/components/prism-abap.min.js"></script>
    <script>$(document).ready(function() {
      $('pre code').each(function(i, block) {
        hljs.highlightBlock(block);
      });
    });</script>

    <!-- jQuery + Fitvids, which makes all video embeds responsive -->
    <script
        src="https://code.jquery.com/jquery-3.2.1.min.js"
        integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
        crossorigin="anonymous">
    </script>
    <script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="https://demo.ghost.io/assets/js/jquery.fitvids.js?v=724281a32e"></script>


    <!-- Paginator increased to "infinit" in _config.yml -->
    <!-- if paginator.posts  -->
    <!-- <script>
        var maxPages = parseInt('');
    </script>
    <script src="/assets/js/infinitescroll.js"></script> -->
    <!-- /endif -->

    


    <!-- Add Google Analytics  -->
    <!-- Google Analytics Tracking code -->
 <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-xxxxxxxx-x', 'auto');
  ga('send', 'pageview');

 </script>


    <!-- The #block helper will pull in data from the #contentFor other template files. In this case, there's some JavaScript which we only want to use in post.hbs, but it needs to be included down here, after jQuery has already loaded. -->
    
        <script>

// NOTE: Scroll performance is poor in Safari
// - this appears to be due to the events firing much more slowly in Safari.
//   Dropping the scroll event and using only a raf loop results in smoother
//   scrolling but continuous processing even when not scrolling
$(document).ready(function () {
    // Start fitVids
    var $postContent = $(".post-full-content");
    $postContent.fitVids();
    // End fitVids

    var progressBar = document.querySelector('progress');
    var header = document.querySelector('.floating-header');
    var title = document.querySelector('.post-full-title');

    var lastScrollY = window.scrollY;
    var lastWindowHeight = window.innerHeight;
    var lastDocumentHeight = $(document).height();
    var ticking = false;

    function onScroll() {
        lastScrollY = window.scrollY;
        requestTick();
    }

    function onResize() {
        lastWindowHeight = window.innerHeight;
        lastDocumentHeight = $(document).height();
        requestTick();
    }

    function requestTick() {
        if (!ticking) {
            requestAnimationFrame(update);
        }
        ticking = true;
    }

    function update() {
        var trigger = title.getBoundingClientRect().top + window.scrollY;
        var triggerOffset = title.offsetHeight + 35;
        var progressMax = lastDocumentHeight - lastWindowHeight;

        // show/hide floating header
        if (lastScrollY >= trigger + triggerOffset) {
            header.classList.add('floating-active');
        } else {
            header.classList.remove('floating-active');
        }

        progressBar.setAttribute('max', progressMax);
        progressBar.setAttribute('value', lastScrollY);

        ticking = false;
    }

    window.addEventListener('scroll', onScroll, {passive: true});
    window.addEventListener('resize', onResize, false);

    update();
});
</script>

    

    <!-- Ghost outputs important scripts and data with this tag - it should always be the very last thing before the closing body tag -->
    <!-- ghost_foot -->

</body>
</html>
